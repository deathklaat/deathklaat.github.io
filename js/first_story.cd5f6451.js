(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["first_story"],{"4dea":function(t,e,n){"use strict";n("5218")},5218:function(t,e,n){},"87fd":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page first-story-page",on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onSaveClick.apply(null,arguments):null}}},[n("div",{staticClass:"page__title"},[n("nav-back"),t._v(" Настройка первой истории после инсталла ")],1),n("label",{staticClass:"mt-4"},[t._v("История 18+")]),n("b-form-select",{attrs:{options:t.storiesOptions},model:{value:t.selectedAdultStory,callback:function(e){t.selectedAdultStory=t._n(e)},expression:"selectedAdultStory"}}),n("label",{staticClass:"mt-3"},[t._v("Альтернативная история")]),n("b-form-select",{attrs:{options:t.storiesOptions},model:{value:t.selectedAlternateStory,callback:function(e){t.selectedAlternateStory=t._n(e)},expression:"selectedAlternateStory"}}),n("ui-button",{staticClass:"first-story-page__button",on:{clicked:t.onSaveClick}},[t._v("Применить")])],1)},s=[],o=n("1da1"),a=n("5530"),i=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("b64b"),n("25f0"),n("2f62")),c=n("a70a"),l={data:function(){return{storiesOptions:[{value:0,text:"Ожидание"}],selectedAdultStory:0,selectedAlternateStory:0,adultStoryChanged:!1,alternateStoryChanged:!1}},components:{NavBack:function(){return n.e("chunk-49c533a1").then(n.bind(null,"e019"))},UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},computed:Object(a["a"])(Object(a["a"])({},Object(i["e"])(["configs"])),{},{stories:function(){return this.$store.state.firebase.config.Stories.stories},config:function(){return this.$store.state.firebase.config.EconomyConfig}}),mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getConfig();case 2:t.fillSelects();case 3:case"end":return e.stop()}}),e)})))()},watch:{selectedAdultStory:function(t,e){e&&(this.adultStoryChanged=!0)},selectedAlternateStory:function(t,e){e&&(this.alternateStoryChanged=!0)}},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])("firebase",["getConfig","updateEconomyConfig"])),{},{fillSelects:function(){this.storiesOptions=this.stories.map((function(t){return{value:t.id,text:t.title}})),this.selectedAdultStory=this.config.start_story_adult,this.selectedAlternateStory=this.config.start_story},onSaveClick:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n={},t.adultStoryChanged&&(n.start_story_adult=t.selectedAdultStory),t.alternateStoryChanged&&(n.start_story=t.selectedAlternateStory),Object.keys(n).length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.updateEconomyConfig(n);case 7:r=e.sent,r.error?c["a"].$emit("show-notification-message","Ошибка: ".concat(r.error.toString())):c["a"].$emit("show-notification-message","Сохранено");case 9:case"end":return e.stop()}}),e)})))()}})},u=l,d=(n("4dea"),n("2877")),f=Object(d["a"])(u,r,s,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=first_story.cd5f6451.js.map