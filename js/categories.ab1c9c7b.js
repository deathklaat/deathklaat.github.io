(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["categories"],{"8c89":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"page__title"},[n("nav-back"),t._v(" Список категорий "),n("ui-button",{staticClass:"page__add-button",attrs:{color:"blue"},on:{clicked:t.onAddClick}},[t._v(" Добавить ")])],1),n("table",{staticClass:"users-list table table-striped"},[t._m(0),n("tbody",t._l(t.categories,(function(e,a){return n("tr",{key:a},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),n("td",[t._v(t._s(e.name))]),n("td",[n("svg",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"bi bi-pencil page__active-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",title:"Редактировать"},on:{click:function(n){return t.onEditClick(e)}}},[n("path",{attrs:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}})])])])})),0)])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("ID")]),n("th",{attrs:{scope:"col"}},[t._v("Название")]),n("th",{attrs:{scope:"col"}},[t._v("Действия")])])])}],r=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2f62")),i=n("bc87"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-popup",on:{click:t.resetAlert,keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onAddClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[t._v(" Добавление категории "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:t.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"input",staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Название"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:t.onAddClick}},[t._v("Добавить")]),t.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.alert))]):t._e()],1)},l=[],u=n("1da1"),p=(n("96cf"),n("b0c0"),n("25f0"),{data:function(){return{name:"",alert:"",canReset:!1}},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},computed:Object(r["a"])({},Object(s["c"])("firebase",["getNewEntityID"])),mounted:function(){this.$refs.input.focus()},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])("firebase",["saveCategory"])),{},{resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(t){var e=this;this.alert=t,setTimeout((function(){e.canReset=!0}),250)},onAddClick:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.name){e.next=3;break}return t.setAlert("Необходимо ввести название"),e.abrupt("return");case 3:return e.next=5,t.saveCategory({id:t.getNewEntityID("Categories"),name:t.name});case 5:n=e.sent,n.error?t.setAlert("Ошибка: ".concat(n.error.toString())):t.close();case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.$modal.hide("add-category-modal")}})}),d=p,m=n("2877"),h=Object(m["a"])(d,c,l,!1,null,null,null),f=h.exports,v=function(){var t=new i["a"]({component:f,props:{},params:{transition:"scale",name:"add-category-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});t.show()},b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-popup",on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onSaveClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[t._v(" Редактирование категории "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:t.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"input",staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Название"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:t.onSaveClick}},[t._v("Сохранить")]),t.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.alert))]):t._e()],1)},g=[],w=n("a70a"),_={props:["category"],data:function(){return{name:"",alert:""}},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},mounted:function(){this.name=this.category.name,this.$refs.input.focus()},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])("firebase",["saveCategory"])),{},{resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(t){var e=this;this.alert=t,setTimeout((function(){e.canReset=!0}),250)},onSaveClick:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.name){e.next=3;break}return t.setAlert("Необходимо ввести название"),e.abrupt("return");case 3:return e.next=5,t.saveCategory({id:t.category.id,name:t.name});case 5:n=e.sent,n.error?w["a"].$emit("show-notification-message","Ошибка: ".concat(n.error.toString())):t.close();case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.$modal.hide("edit-category-modal")}})},C=_,k=Object(m["a"])(C,b,g,!1,null,null,null),y=k.exports,x=function(t){var e=new i["a"]({component:y,props:{category:t},params:{transition:"scale",name:"edit-category-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});e.show()},O={components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))},NavBack:function(){return n.e("chunk-49c533a1").then(n.bind(null,"e019"))}},computed:{categories:function(){return this.$store.state.firebase.config.Categories}},created:function(){this.getConfig()},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])("firebase",["getConfig"])),{},{onEditClick:function(t){x(t)},onAddClick:function(){v()}})},j=O,A=Object(m["a"])(j,a,o,!1,null,null,null);e["default"]=A.exports},bc87:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",(function(){return c}));n("b0c0");var s=n("1881"),i=n.n(s),c=function(){function t(e){var n=e.component,o=e.props,r=void 0===o?{}:o,s=e.params,i=void 0===s?{}:s,c=e.events,l=void 0===c?{}:c;a(this,t),this.component=n,this.props=r,this.params=i,this.events={opened:function(){Object.assign(n,{modalName:i.name})},closed:function(){}},Object.assign(this.events,l)}return r(t,[{key:"show",value:function(){i.a.rootInstance.$modal.show(this.component,this.props,this.params,this.events)}},{key:"hide",value:function(){i.a.rootInstance.$emit("close")}}]),t}()}}]);
//# sourceMappingURL=categories.ab1c9c7b.js.map