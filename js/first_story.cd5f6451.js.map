{"version":3,"sources":["webpack:///./src/views/Firebase/FirstStory.vue?5d62","webpack:///./src/views/Firebase/FirstStory.vue?7f0c","webpack:///src/views/Firebase/FirstStory.vue","webpack:///./src/views/Firebase/FirstStory.vue?3cb7","webpack:///./src/views/Firebase/FirstStory.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","type","indexOf","keyCode","onSaveClick","apply","arguments","_v","attrs","storiesOptions","model","value","callback","$$v","selectedAdultStory","_n","expression","selectedAlternateStory","staticRenderFns","component"],"mappings":"+GAAA,W,kECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwBC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAyB,KAAjBF,EAAOG,QAAoCX,EAAIY,YAAYC,MAAM,KAAMC,WAA1C,QAAwD,CAACV,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,YAAYJ,EAAIe,GAAG,8CAA8C,GAAGX,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACN,EAAIe,GAAG,iBAAiBX,EAAG,gBAAgB,CAACY,MAAM,CAAC,QAAUhB,EAAIiB,gBAAgBC,MAAM,CAACC,MAAOnB,EAAsB,mBAAEoB,SAAS,SAAUC,GAAMrB,EAAIsB,mBAAmBtB,EAAIuB,GAAGF,IAAMG,WAAW,wBAAwBpB,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACN,EAAIe,GAAG,4BAA4BX,EAAG,gBAAgB,CAACY,MAAM,CAAC,QAAUhB,EAAIiB,gBAAgBC,MAAM,CAACC,MAAOnB,EAA0B,uBAAEoB,SAAS,SAAUC,GAAMrB,EAAIyB,uBAAuBzB,EAAIuB,GAAGF,IAAMG,WAAW,4BAA4BpB,EAAG,YAAY,CAACE,YAAY,2BAA2BC,GAAG,CAAC,QAAUP,EAAIY,cAAc,CAACZ,EAAIe,GAAG,gBAAgB,IAChgCW,EAAkB,G,wHCoBtB,GACE,KAAF,WAAI,MAAJ,CACM,eAAN,EAAQ,MAAR,EAAQ,KAAR,aACM,mBAAN,EACM,uBAAN,EACM,mBAAN,EACM,uBAAN,IAEE,WAAF,CACI,QAAJ,WAAM,OAAN,iDACI,SAAJ,WAAM,OAAN,kDAEE,SAAF,iCACA,6BADA,IAEI,QAFJ,WAGM,OAAN,mDAEI,OALJ,WAMM,OAAN,mDAGE,QArBF,WAqBI,IAAJ,OAAI,OAAJ,sJACA,cADA,OAEA,gBAFA,8CAIE,MAAF,CACI,mBADJ,SACA,KACA,gCAEI,uBAJJ,SAIA,KACA,qCAGE,QAAF,iCACA,gEADA,IAEI,YAFJ,WAGM,KAAN,6CACQ,MAAR,CAAU,MAAV,KAAU,KAAV,YAGM,KAAN,iDACM,KAAN,gDAEI,YAVJ,WAUM,IAAN,OAAM,OAAN,qDAAQ,IAAR,IAAQ,OAAR,6EACA,KACA,gEACA,kEACA,sBAJA,iEAMA,yBANA,OAMA,EANA,OAQA,QAGA,gFAFA,sDATA,iDChEmW,I,wBCQ/VC,EAAY,eACd,EACA5B,EACA2B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/first_story.cd5f6451.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstStory.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page first-story-page\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==13){ return null; }return _vm.onSaveClick.apply(null, arguments)}}},[_c('div',{staticClass:\"page__title\"},[_c('nav-back'),_vm._v(\" Настройка первой истории после инсталла \")],1),_c('label',{staticClass:\"mt-4\"},[_vm._v(\"История 18+\")]),_c('b-form-select',{attrs:{\"options\":_vm.storiesOptions},model:{value:(_vm.selectedAdultStory),callback:function ($$v) {_vm.selectedAdultStory=_vm._n($$v)},expression:\"selectedAdultStory\"}}),_c('label',{staticClass:\"mt-3\"},[_vm._v(\"Альтернативная история\")]),_c('b-form-select',{attrs:{\"options\":_vm.storiesOptions},model:{value:(_vm.selectedAlternateStory),callback:function ($$v) {_vm.selectedAlternateStory=_vm._n($$v)},expression:\"selectedAlternateStory\"}}),_c('ui-button',{staticClass:\"first-story-page__button\",on:{\"clicked\":_vm.onSaveClick}},[_vm._v(\"Применить\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"page first-story-page\" @keyup.13=\"onSaveClick\">\r\n        <div class=\"page__title\">\r\n            <nav-back/>\r\n            Настройка первой истории после инсталла\r\n        </div>\r\n\r\n        <label class=\"mt-4\">История 18+</label>\r\n        <b-form-select v-model.number=\"selectedAdultStory\" :options=\"storiesOptions\"/>\r\n\r\n        <label class=\"mt-3\">Альтернативная история</label>\r\n        <b-form-select v-model.number=\"selectedAlternateStory\" :options=\"storiesOptions\"/>\r\n\r\n        <ui-button @clicked=\"onSaveClick\" class=\"first-story-page__button\">Применить</ui-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapState} from 'vuex';\r\nimport bus from '@/plugins/bus';\r\n\r\nexport default {\r\n    data: () => ({\r\n        storiesOptions: [{value: 0, text: 'Ожидание'}],\r\n        selectedAdultStory: 0,\r\n        selectedAlternateStory: 0,\r\n        adultStoryChanged: false,\r\n        alternateStoryChanged: false,\r\n    }),\r\n    components: {\r\n        NavBack: () => import('../../components/navigation/NavBack'),\r\n        UiButton: () => import('../../components/ui/UiButton')\r\n    },\r\n    computed: {\r\n        ...mapState(['configs']),\r\n        stories() {\r\n            return this.$store.state.firebase.config.Stories.stories;\r\n        },\r\n        config() {\r\n            return this.$store.state.firebase.config.EconomyConfig;\r\n        }\r\n    },\r\n    async mounted() {\r\n        await this.getConfig();\r\n        this.fillSelects();\r\n    },\r\n    watch: {\r\n        selectedAdultStory(value, oldValue) {\r\n            if (oldValue) this.adultStoryChanged = true;\r\n        },\r\n        selectedAlternateStory(value, oldValue) {\r\n            if (oldValue) this.alternateStoryChanged = true;\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions('firebase', ['getConfig', 'updateEconomyConfig']),\r\n        fillSelects() {\r\n            this.storiesOptions = this.stories.map(story => {\r\n                return {value: story.id, text: story.title};\r\n            });\r\n\r\n            this.selectedAdultStory = this.config.start_story_adult;\r\n            this.selectedAlternateStory = this.config.start_story;\r\n        },\r\n        async onSaveClick() {\r\n            const data = {};\r\n            if (this.adultStoryChanged) data.start_story_adult = this.selectedAdultStory;\r\n            if (this.alternateStoryChanged) data.start_story = this.selectedAlternateStory;\r\n            if (!Object.keys(data).length) return;\r\n\r\n            const response = await this.updateEconomyConfig(data);\r\n\r\n            if (!response.error)\r\n                bus.$emit('show-notification-message', 'Сохранено');\r\n            else\r\n                bus.$emit('show-notification-message', `Ошибка: ${response.error.toString()}`);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.first-story-page {\r\n    label {\r\n        text-align: left;\r\n    }\r\n\r\n    select {\r\n        max-width: 25%;\r\n    }\r\n\r\n    &__button {\r\n        max-width: fit-content;\r\n        margin-top: 16px;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstStory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstStory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FirstStory.vue?vue&type=template&id=4a15d882&\"\nimport script from \"./FirstStory.vue?vue&type=script&lang=js&\"\nexport * from \"./FirstStory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FirstStory.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}