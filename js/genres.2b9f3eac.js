(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["genres"],{"29f1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"page__title"},[n("nav-back"),e._v(" Список жанров "),n("ui-button",{staticClass:"page__add-button",attrs:{color:"blue"},on:{clicked:e.onAddClick}},[e._v(" Добавить ")])],1),n("table",{staticClass:"users-list table table-striped"},[e._m(0),n("tbody",e._l(e.genres,(function(t,a){return n("tr",{key:a},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(t.name))]),n("td",[n("svg",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"bi bi-pencil page__active-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",title:"Редактировать"},on:{click:function(n){return e.onEditClick(t)}}},[n("path",{attrs:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}})])])])})),0)])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("ID")]),n("th",{attrs:{scope:"col"}},[e._v("Название")]),n("th",{attrs:{scope:"col"}},[e._v("Действия")])])])}],r=n("5530"),i=(n("d3b7"),n("3ca3"),n("ddb0"),n("2f62")),o=n("bc87"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-popup",on:{click:e.resetAlert,keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onAddClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[e._v(" Добавление жанра "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:e.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"input",staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Название"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:e.onAddClick}},[e._v("Добавить")]),e.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.alert))]):e._e()],1)},l=[],u=n("1da1"),d=(n("96cf"),n("b0c0"),n("25f0"),{data:function(){return{name:"",alert:"",canReset:!1}},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},computed:Object(r["a"])({},Object(i["c"])("firebase",["getNewEntityID"])),mounted:function(){this.$refs.input.focus()},methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])("firebase",["saveGenre"])),{},{resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(e){var t=this;this.alert=e,setTimeout((function(){t.canReset=!0}),250)},onAddClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.name){t.next=3;break}return e.setAlert("Необходимо ввести название"),t.abrupt("return");case 3:return t.next=5,e.saveGenre({id:e.getNewEntityID("Genres"),name:e.name});case 5:n=t.sent,n.error?e.setAlert("Ошибка: ".concat(n.error.toString())):e.close();case 7:case"end":return t.stop()}}),t)})))()},close:function(){this.$modal.hide("add-genre-modal")}})}),p=d,m=n("2877"),h=Object(m["a"])(p,c,l,!1,null,null,null),v=h.exports,f=function(e){var t=new o["a"]({component:v,props:{Genre:e},params:{transition:"scale",name:"add-genre-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});t.show()},b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-popup",on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onSaveClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[e._v(" Редактирование жанра "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:e.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"input",staticClass:"form-control mb-2",attrs:{type:"text",placeholder:"Название"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:e.onSaveClick}},[e._v("Сохранить")]),e.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.alert))]):e._e()],1)},g=[],_=n("a70a"),w={props:["genre"],data:function(){return{name:"",alert:""}},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},mounted:function(){this.name=this.genre.name,this.$refs.input.focus()},methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])("firebase",["saveGenre"])),{},{resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(e){var t=this;this.alert=e,setTimeout((function(){t.canReset=!0}),250)},onSaveClick:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.name){t.next=3;break}return e.setAlert("Необходимо ввести название"),t.abrupt("return");case 3:return t.next=5,e.saveGenre({id:e.genre.id,name:e.name});case 5:n=t.sent,n.error?_["a"].$emit("show-notification-message","Ошибка: ".concat(n.error.toString())):e.close();case 7:case"end":return t.stop()}}),t)})))()},close:function(){this.$modal.hide("edit-genre-modal")}})},k=w,C=Object(m["a"])(k,b,g,!1,null,null,null),x=C.exports,O=function(e){var t=new o["a"]({component:x,props:{genre:e},params:{transition:"scale",name:"edit-genre-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});t.show()},j={components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))},NavBack:function(){return n.e("chunk-49c533a1").then(n.bind(null,"e019"))}},computed:{genres:function(){return this.$store.state.firebase.config.Genres}},created:function(){this.getConfig()},methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])("firebase",["getConfig"])),{},{onEditClick:function(e){O(e)},onAddClick:function(){f()}})},y=j,A=Object(m["a"])(y,a,s,!1,null,null,null);t["default"]=A.exports},bc87:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("d4ec"),s=n("bee2"),r=(n("b0c0"),n("1881")),i=n.n(r),o=function(){function e(t){var n=t.component,s=t.props,r=void 0===s?{}:s,i=t.params,o=void 0===i?{}:i,c=t.events,l=void 0===c?{}:c;Object(a["a"])(this,e),this.component=n,this.props=r,this.params=o,this.events={opened:function(){Object.assign(n,{modalName:o.name})},closed:function(){}},Object.assign(this.events,l)}return Object(s["a"])(e,[{key:"show",value:function(){i.a.rootInstance.$modal.show(this.component,this.props,this.params,this.events)}},{key:"hide",value:function(){i.a.rootInstance.$emit("close")}}]),e}()}}]);
//# sourceMappingURL=genres.2b9f3eac.js.map