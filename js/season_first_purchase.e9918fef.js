(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["season_first_purchase"],{"27a6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page season-first-purchase-page"},[a("div",{staticClass:"page__title"},[a("nav-back"),t._v(" Сезонные первые покупки (в разработке) "),a("ui-button",{staticClass:"page__title-button",attrs:{color:"blue"},on:{clicked:t.onAddSeasonClick}},[t._v("Добавить")])],1),a("div",{staticClass:"form-group d-flex justify-content-between"},[a("b-dropdown",{attrs:{text:t.seasonText}},t._l(t.seasons,(function(e,s){return a("b-dropdown-item",{key:s,attrs:{"data-value":e.id},on:{click:t.onSeasonSelect}},[t._v(" "+t._s(e.name)+" ")])})),1),a("div",{staticClass:"season-first-purchase-page__buttons"},[0!=t.seasonValue?a("ui-button",{on:{clicked:t.onSaveClick}},[t._v(" Сохранить ")]):t._e(),-1==t.seasonValue?a("ui-button",{staticClass:"ml-2",on:{clicked:t.onCancelClick}},[t._v(" Отмена ")]):t._e()],1),a("div")],1),0!=t.seasonValue?[a("div",{staticClass:"page__table"},[a("div",{staticClass:"page__table-row"},[a("div",{staticClass:"page__table-cell"},[t._v("Название:")]),a("div",{staticClass:"page__table-cell justify-content-end mr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.seasonText,expression:"seasonText"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.seasonText},on:{input:function(e){e.target.composing||(t.seasonText=e.target.value)}}})])]),a("div",{staticClass:"page__table-row"},[a("div",{staticClass:"page__table-cell"},[t._v("Статус:")]),a("div",{staticClass:"page__table-cell justify-content-end mr-0"},[a("b",[t._v(t._s(t.status))])])]),a("div",{staticClass:"page__table-row"},[t._m(0),a("div",{staticClass:"page__table-cell align-items-center justify-content-end mr-0"},[a("b-form-datepicker",{staticClass:"first-purchase-page__date-picker",model:{value:t.dateStartValue,callback:function(e){t.dateStartValue=e},expression:"dateStartValue"}}),a("span",{staticClass:"mx-2"},[t._v(":")]),a("b-form-datepicker",{staticClass:"first-purchase-page__date-picker",model:{value:t.dateEndValue,callback:function(e){t.dateEndValue=e},expression:"dateEndValue"}})],1)]),a("div",{staticClass:"page__table-row"},[a("div",{staticClass:"page__table-cell"},[t._v("Бонус ПП:")]),a("div",{staticClass:"page__table-cell justify-content-end mr-0"},[a("b-dropdown",{attrs:{text:t.firstPurchaseRelationText}},t._l(t.firstPurchaseRelations,(function(e,s){return a("b-dropdown-item",{key:s,attrs:{"data-value":e.id},on:{click:t.onRelationSelect}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)])]),a("div",{staticClass:"page__table mt-5"},[t._m(1),t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"page__table-row",attrs:{"data-id":e.id}},[a("div",{staticClass:"page__table-cell"},[t._v(t._s(e.google_id))]),a("div",{staticClass:"page__table-cell justify-content-end"},[a("input",{staticClass:"form-control text-right",staticStyle:{width:"200px"},attrs:{type:"number",min:"0",oninput:"validity.valid||(value=0)"},domProps:{value:t.multipliers[e.id]},on:{input:function(a){return t.updateMultiplier(e.id,a)}}})])])}))],2)]:t._e()],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page__table-cell"},[a("label",{staticClass:"my-0"},[t._v("Период:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page__table-row page__table-row--header"},[a("div",{staticClass:"page__table-cell"},[t._v("Товар")]),a("div",{staticClass:"page__table-cell"},[t._v("Множитель")])])}],n=a("5530"),l=a("1da1"),o=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("159b"),a("b64b"),a("2f62")),r=a("a026"),c={data:function(){return{pageIsReady:!1,multipliers:{},seasonValue:0,seasonText:"",seasons:[{id:0,name:"Выбрать"},{id:1,name:"Хеллоуин"},{id:2,name:"Новый год"}],dateStartValue:"",dateEndValue:"",firstPurchaseRelationText:"",firstPurchaseRelationValue:0,firstPurchaseRelations:[{id:0,name:"Заменяет"},{id:1,name:"Суммируется"},{id:2,name:"Уступает"}]}},components:{UiButton:function(){return a.e("chunk-7a628425").then(a.bind(null,"832a"))},NavBack:function(){return a.e("chunk-49c533a1").then(a.bind(null,"e019"))}},computed:{products:function(){return this.$store.state.products.list},status:function(){if(!this.dateStartValue.length||!this.dateEndValue.length)return"Неактивно";var t=(new Date).getTime(),e=t>=Date.parse(this.dateStartValue)&&t<=Date.parse(this.dateEndValue);return e?"Активно":"Неактивно"}},created:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProducts();case 2:t.initMultipliers(),t.seasonText=t.seasons[t.seasonValue].name,t.firstPurchaseRelationText=t.firstPurchaseRelations[t.firstPurchaseRelationValue].name,t.pageIsReady=!0;case 6:case"end":return e.stop()}}),e)})))()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])("products",["getProducts"])),{},{initMultipliers:function(){var t=this;Object.keys(this.products).forEach((function(e){return t.multipliers[e]=1}))},updateMultiplier:function(t,e){r["default"].set(this.multipliers,t,parseInt(e.target.value,10))},onAddSeasonClick:function(){var t=this,e=-1;this.seasons.push({id:e,name:"Новое"}),this.seasonValue=e,this.seasonText="Новое",Object.keys(this.multipliers).forEach((function(e){return t.multipliers[e]=1}))},onSaveClick:function(){-1==this.seasonValue&&(this.seasonValue=this.seasons.length-1,this.seasons[this.seasonValue].id=this.seasonValue>0?this.seasons[this.seasonValue-1].id+1:1),this.seasons[this.seasonValue].name=this.seasonText},onCancelClick:function(){this.seasons.pop(),this.seasonValue=0,this.seasonText=this.seasons[this.seasonValue].name},onSeasonSelect:function(t){this.seasonValue=parseInt(t.target.dataset.value,10),this.seasonText=this.seasons[this.seasonValue].name},onRelationSelect:function(t){this.firstPurchaseRelationValue=parseInt(t.target.dataset.value,10),this.firstPurchaseRelationText=this.firstPurchaseRelations[this.firstPurchaseRelationValue].name}})},u=c,d=(a("a743"),a("2877")),p=Object(d["a"])(u,s,i,!1,null,null,null);e["default"]=p.exports},4390:function(t,e,a){},a743:function(t,e,a){"use strict";a("4390")}}]);
//# sourceMappingURL=season_first_purchase.e9918fef.js.map