{"version":3,"sources":["webpack:///./src/components/products/MultiPacksList.vue?fa6a","webpack:///src/components/products/MultiPacksList.vue","webpack:///./src/components/products/MultiPacksList.vue?84c9","webpack:///./src/components/products/MultiPacksList.vue","webpack:///./src/components/products/MultiPacksList.vue?a58f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","pack","index","key","_v","_s","id","_m","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","$set","firstBonus","modifiers","onFirstBonusChange","_n","$forceUpdate","onSavePackClick","onDeletePackClick","reward","i","currenciesOptions","model","selectedCurrencies","callback","$$v","rewardValues","onDeletePackRewardClick","availableCurrencies","length","onAddPackRewardClick","_e","staticStyle","onAddPackClick","staticRenderFns","bus","parseInt","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAAEN,EAAS,MAAEA,EAAIO,GAAIP,EAAa,WAAE,SAASQ,EAAKC,GAAO,OAAOL,EAAG,MAAM,CAACM,IAAID,EAAMH,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACN,EAAIW,GAAG,SAASX,EAAIY,GAAGJ,EAAKK,OAAOT,EAAG,QAAQ,CAACE,YAAY,+CAA+C,CAACN,EAAIc,GAAG,GAAE,GAAMV,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACA,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOV,EAAc,UAAEW,WAAW,mBAAmBb,YAAY,eAAec,MAAM,CAAC,KAAO,QAAQC,SAAS,CAAC,MAASb,EAAc,WAAGc,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,WAAqBzB,EAAI0B,KAAKlB,EAAM,YAAae,EAAOC,OAAON,aAAad,EAAG,KAAK,CAACA,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOV,EAAa,SAAEW,WAAW,kBAAkBb,YAAY,eAAec,MAAM,CAAC,KAAO,QAAQC,SAAS,CAAC,MAASb,EAAa,UAAGc,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,WAAqBzB,EAAI0B,KAAKlB,EAAM,WAAYe,EAAOC,OAAON,aAAad,EAAG,KAAK,CAACA,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,iBAAiBC,MAAOlB,EAAI2B,WAAWnB,EAAKK,IAAKM,WAAW,sBAAsBS,UAAU,CAAC,QAAS,KAAQtB,YAAY,eAAec,MAAM,CAAC,KAAO,SAAS,IAAM,IAAI,QAAU,6BAA6BC,SAAS,CAAC,MAASrB,EAAI2B,WAAWnB,EAAKK,KAAMS,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOvB,EAAI6B,mBAAmBrB,EAAKK,GAAIU,IAAS,MAAQ,SAASA,GAAWA,EAAOC,OAAOC,WAAqBzB,EAAI0B,KAAK1B,EAAI2B,WAAYnB,EAAKK,GAAIb,EAAI8B,GAAGP,EAAOC,OAAON,SAAS,KAAO,SAASK,GAAQ,OAAOvB,EAAI+B,qBAAqB3B,EAAG,KAAK,CAACA,EAAG,MAAM,CAACW,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,oBAAoBW,UAAU,CAAC,OAAQ,KAAQtB,YAAY,qBAAqBc,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,KAAO,eAAe,QAAU,YAAY,MAAQ,aAAaE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIgC,gBAAgBxB,MAAS,CAACJ,EAAG,OAAO,CAACgB,MAAM,CAAC,EAAI,qJAAqJhB,EAAG,OAAO,CAACgB,MAAM,CAAC,EAAI,gKAAgKhB,EAAG,MAAM,CAACW,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,oBAAoBW,UAAU,CAAC,OAAQ,KAAQtB,YAAY,wBAAwBc,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,KAAO,eAAe,QAAU,YAAY,MAAQ,WAAWE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIiC,kBAAkBzB,EAAKK,OAAO,CAACT,EAAG,OAAO,CAACgB,MAAM,CAAC,EAAI,qKAAqKhB,EAAG,OAAO,CAACgB,MAAM,CAAC,YAAY,UAAU,EAAI,0PAA0PhB,EAAG,QAAQ,CAACE,YAAY,gFAAgF,CAACN,EAAIc,GAAG,GAAE,GAAMV,EAAG,QAAQJ,EAAIO,GAAIC,EAAY,SAAE,SAAS0B,EAAOC,GAAG,OAAO/B,EAAG,KAAK,CAACM,IAAIwB,EAAOrB,IAAI,CAACT,EAAG,KAAK,CAACA,EAAG,gBAAgB,CAACE,YAAY,eAAec,MAAM,CAAC,QAAUpB,EAAIoC,mBAAmBC,MAAM,CAACnB,MAAOlB,EAAIsC,mBAAmB9B,EAAKK,IAAIsB,GAAII,SAAS,SAAUC,GAAMxC,EAAI0B,KAAK1B,EAAIsC,mBAAmB9B,EAAKK,IAAKsB,EAAGK,IAAMrB,WAAW,qCAAqC,GAAGf,EAAG,KAAK,CAACA,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,iBAAiBC,MAAOlB,EAAIyC,aAAajC,EAAKK,IAAIsB,GAAIhB,WAAW,2BAA2BS,UAAU,CAAC,QAAS,KAAQtB,YAAY,eAAec,MAAM,CAAC,KAAO,SAAS,IAAM,IAAI,QAAU,6BAA6BC,SAAS,CAAC,MAASrB,EAAIyC,aAAajC,EAAKK,IAAIsB,IAAKb,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,WAAqBzB,EAAI0B,KAAK1B,EAAIyC,aAAajC,EAAKK,IAAKsB,EAAGnC,EAAI8B,GAAGP,EAAOC,OAAON,SAAS,KAAO,SAASK,GAAQ,OAAOvB,EAAI+B,qBAAqB3B,EAAG,MAAMA,EAAG,KAAK,CAACA,EAAG,MAAM,CAACW,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,oBAAoBW,UAAU,CAAC,OAAQ,KAAQtB,YAAY,wBAAwBc,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,KAAO,eAAe,QAAU,YAAY,MAAQ,WAAWE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAI0C,wBAAwBlC,EAAKK,GAAIqB,EAAOrB,OAAO,CAACT,EAAG,OAAO,CAACgB,MAAM,CAAC,EAAI,qKAAqKhB,EAAG,OAAO,CAACgB,MAAM,CAAC,YAAY,UAAU,EAAI,yPAAwP,KAAMpB,EAAI2C,oBAAoBC,OAAS,EAAGxC,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,YAAY,CAACE,YAAY,+BAA+BgB,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAOvB,EAAI6C,qBAAqBrC,EAAKK,OAAO,CAACb,EAAIW,GAAG,wBAAwB,GAAGX,EAAI8C,UAAS9C,EAAI8C,KAAK1C,EAAG,MAAM,CAACE,YAAY,SAASyC,YAAY,CAAC,MAAQ,SAAS,CAAC3C,EAAG,YAAY,CAACE,YAAY,+BAA+BgB,GAAG,CAAC,QAAUtB,EAAIgD,iBAAiB,CAAChD,EAAIW,GAAG,qBAAqB,IAAI,IAC/2KsC,EAAkB,CAAC,WAAa,IAAIjD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,eAAeP,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,cAAcP,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,qBAAqBP,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,mBAAmB,WAAa,IAAIX,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,KAAK,CAACA,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,YAAYP,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,YAAYP,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,SAAShB,EAAG,KAAK,CAACgB,MAAM,CAAC,MAAQ,QAAQ,CAACpB,EAAIW,GAAG,oB,wLCqG7nB,GACE,MAAF,CACI,MAAJ,OAEE,KAAF,WAAI,MAAJ,CACM,OAAN,EACM,UAAN,GACM,kBAAN,GACM,mBAAN,GACM,aAAN,GACM,WAAN,KAEE,SAAF,CACI,WADJ,WAEM,OAAN,mCAEI,oBAJJ,WAKM,IAAN,KAKM,OAJA,KAAN,+BACQ,EAAR,6BAAU,OACV,qCAEA,6CACA,oBAAQ,OAAR,sBAGE,WAAF,CACI,SAAJ,WAAM,OAAN,kDAEE,QA7BF,WA6BI,IAAJ,OAAI,OAAJ,sJACA,cADA,OAEA,oBACA,sFAHA,8CAKE,cAlCF,WAmCI,EAAJ,2DAEE,QAAF,iCACA,wEADA,IAEI,gBAFJ,WAEM,IAAN,OACM,KAAN,qBACM,KAAN,+BAAQ,OAAR,gDACM,KAAN,eAEI,kBAPJ,SAOA,GACM,GAAN,wBAEI,YAVJ,WAUM,IAAN,OACM,KAAN,+DACA,oBAAQ,OAAR,UACA,iBACQ,MAAR,CACU,MAAV,KACU,KAAV,WAGM,KAAN,+BACQ,EAAR,oDAAU,OAAV,QACQ,EAAR,8CAAU,OAAV,cAEM,KAAN,UAEI,qBAzBJ,SAyBA,GACM,KAAN,4BAAQ,OAAR,0BACQ,GAAR,+BACQ,MAAR,IAEM,KAAN,eAEI,wBAhCJ,SAgCA,KACA,kCAEM,KAAN,4BACQ,GAAR,SAEU,OADA,EAAV,sCAAY,OAAZ,aACA,KAGM,KAAN,gBAEI,gBA3CJ,SA2CA,GAAM,IAAN,OAAM,OAAN,qDAAQ,IAAR,cAAQ,OAAR,0EACA,KACA,KAFA,WAIA,GACA,4BAEoB,OADAuC,EAApB,gFACA,WAGA,qCACoB,IAApB,gFAEoB,OADAA,EAApB,oFACA,WAEA,6BAEA,QACoBrC,GAAIsC,SAAS,EAAjC,gCACoBjC,MAAOiC,SAAS,EAApC,6BAfA,IAJA,YAIA,qCAJA,wBAIA,GAJA,kFAIA,IAJA,8BAuBA,GACA,QACA,sBACA,oBACA,+CACA,WA5BA,UA8BA,iBA9BA,QA8BA,EA9BA,OAgCA,QAIA,iFAHA,sDACA,kBAlCA,+CAsCI,kBAjFJ,SAiFA,GAAM,IAAN,OAAM,OAAN,qDAAQ,IAAR,EAAQ,OAAR,6EACA,gCADA,iEAGA,mBAHA,OAGA,EAHA,OAKA,QAKA,iFAJA,oDACA,+DACA,iBARA,8CAYI,eA7FJ,WA8FM,OAAN,OAAM,IAEF,YAhGJ,WAiGM,KAAN,eACM,KAAN,eAEI,mBApGJ,SAoGA,KACM,IAAN,8BACM,MAAN,UACM,KAAN,oBClPuW,I,wBCQnWC,EAAY,eACd,EACArD,EACAkD,GACA,EACA,KACA,KACA,MAIa,aAAAG,E,2CCnBf,W","file":"js/chunk-271b4faa.8ba2f5a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"multi-packs-list mb-4\"},[(_vm.ready)?_vm._l((_vm.packsList),function(pack,index){return _c('div',{key:index,staticClass:\"multi-packs-list__pack\"},[_c('div',{staticClass:\"multi-packs-list__pack-name mb-2\"},[_vm._v(\"Pack #\"+_vm._s(pack.id))]),_c('table',{staticClass:\"table table-striped multi-packs-list__table\"},[_vm._m(0,true),_c('tbody',[_c('tr',[_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(pack.google_id),expression:\"pack.google_id\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(pack.google_id)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(pack, \"google_id\", $event.target.value)}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(pack.apple_id),expression:\"pack.apple_id\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(pack.apple_id)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(pack, \"apple_id\", $event.target.value)}}})]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.firstBonus[pack.id]),expression:\"firstBonus[pack.id]\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"0\",\"oninput\":\"validity.valid||(value=0)\"},domProps:{\"value\":(_vm.firstBonus[pack.id])},on:{\"change\":function($event){return _vm.onFirstBonusChange(pack.id, $event)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.firstBonus, pack.id, _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('td',[_c('svg',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"bi bi-check-square\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 16 16\",\"title\":\"Сохранить\"},on:{\"click\":function($event){return _vm.onSavePackClick(pack)}}},[_c('path',{attrs:{\"d\":\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"}}),_c('path',{attrs:{\"d\":\"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z\"}})]),_c('svg',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"bi bi-trash ms-3 ml-2\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 16 16\",\"title\":\"Удалить\"},on:{\"click\":function($event){return _vm.onDeletePackClick(pack.id)}}},[_c('path',{attrs:{\"d\":\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"}}),_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"}})])])])])]),_c('table',{staticClass:\"table table-striped multi-packs-list__table multi-packs-list__table--rewards\"},[_vm._m(1,true),_c('tbody',_vm._l((pack.rewards),function(reward,i){return _c('tr',{key:reward.id},[_c('td',[_c('b-form-select',{staticClass:\"form-control\",attrs:{\"options\":_vm.currenciesOptions},model:{value:(_vm.selectedCurrencies[pack.id][i]),callback:function ($$v) {_vm.$set(_vm.selectedCurrencies[pack.id], i, $$v)},expression:\"selectedCurrencies[pack.id][i]\"}})],1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.rewardValues[pack.id][i]),expression:\"rewardValues[pack.id][i]\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"1\",\"oninput\":\"validity.valid||(value=0)\"},domProps:{\"value\":(_vm.rewardValues[pack.id][i])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.rewardValues[pack.id], i, _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('td'),_c('td',[_c('svg',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"bi bi-trash ms-3 ml-2\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 16 16\",\"title\":\"Удалить\"},on:{\"click\":function($event){return _vm.onDeletePackRewardClick(pack.id, reward.id)}}},[_c('path',{attrs:{\"d\":\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"}}),_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"}})])])])}),0)]),(_vm.availableCurrencies.length > 0)?_c('div',{staticClass:\"d-flex\"},[_c('ui-button',{staticClass:\"multi-packs-list__add-button\",on:{\"clicked\":function($event){return _vm.onAddPackRewardClick(pack.id)}}},[_vm._v(\" Добавить валюту \")])],1):_vm._e()])}):_vm._e(),_c('div',{staticClass:\"d-flex\",staticStyle:{\"width\":\"100%\"}},[_c('ui-button',{staticClass:\"multi-packs-list__add-button\",on:{\"clicked\":_vm.onAddPackClick}},[_vm._v(\" Добавить пак \")])],1)],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Google ID\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Apple ID\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Бонус покупки %\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Действия\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Валюта\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Кол-во\")]),_c('th',{attrs:{\"scope\":\"col\"}}),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Действия\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"multi-packs-list mb-4\">\r\n        <template v-if=\"ready\">\r\n            <div v-for=\"(pack, index) of packsList\" :key=\"index\" class=\"multi-packs-list__pack\">\r\n                <div class=\"multi-packs-list__pack-name mb-2\">Pack #{{ pack.id }}</div>\r\n\r\n                <table class=\"table table-striped multi-packs-list__table\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Google ID</th>\r\n                        <th scope=\"col\">Apple ID</th>\r\n                        <th scope=\"col\">Бонус покупки %</th>\r\n                        <th scope=\"col\">Действия</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                <tr>\r\n                    <td><input type=\"text\" v-model=\"pack.google_id\" class=\"form-control\"/></td>\r\n                    <td><input type=\"text\" v-model=\"pack.apple_id\" class=\"form-control\"/></td>\r\n                    <td><input type=\"number\" v-model.number=\"firstBonus[pack.id]\" class=\"form-control\"\r\n                               min=0 oninput=\"validity.valid||(value=0)\"\r\n                               @change=\"onFirstBonusChange(pack.id, $event)\"/></td>\r\n                    <td>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\"\r\n                             class=\"bi bi-check-square\" viewBox=\"0 0 16 16\" v-b-tooltip.hover title=\"Сохранить\"\r\n                             @click=\"onSavePackClick(pack)\"\r\n                        >\r\n                            <path\r\n                                d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"/>\r\n                            <path\r\n                                d=\"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z\"/>\r\n                        </svg>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\"\r\n                             class=\"bi bi-trash ms-3 ml-2\" viewBox=\"0 0 16 16\" v-b-tooltip.hover title=\"Удалить\"\r\n                             @click=\"onDeletePackClick(pack.id)\"\r\n                        >\r\n                            <path\r\n                                d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\r\n                            <path fill-rule=\"evenodd\"\r\n                                  d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\r\n                        </svg>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n                <table class=\"table table-striped multi-packs-list__table multi-packs-list__table--rewards\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Валюта</th>\r\n                        <th scope=\"col\">Кол-во</th>\r\n                        <th scope=\"col\"></th>\r\n                        <th scope=\"col\">Действия</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-for=\"(reward, i) of pack.rewards\" :key=\"reward.id\">\r\n                        <td>\r\n                            <b-form-select class=\"form-control\" v-model=\"selectedCurrencies[pack.id][i]\"\r\n                                           :options=\"currenciesOptions\"/>\r\n                        </td>\r\n                        <td>\r\n                            <input type=\"number\" class=\"form-control\" v-model.number=\"rewardValues[pack.id][i]\"\r\n                                   min=1 oninput=\"validity.valid||(value=0)\"\r\n                            />\r\n                        </td>\r\n                        <td></td>\r\n                        <td>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\"\r\n                                 class=\"bi bi-trash ms-3 ml-2\" viewBox=\"0 0 16 16\" v-b-tooltip.hover title=\"Удалить\"\r\n                                 @click=\"onDeletePackRewardClick(pack.id, reward.id)\"\r\n                            >\r\n                                <path\r\n                                    d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\r\n                                <path fill-rule=\"evenodd\"\r\n                                      d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\r\n                            </svg>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div class=\"d-flex\" v-if=\"availableCurrencies.length > 0\">\r\n                    <ui-button class=\"multi-packs-list__add-button\" @clicked=\"onAddPackRewardClick(pack.id)\">\r\n                        Добавить валюту\r\n                    </ui-button>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <div class=\"d-flex\" style=\"width: 100%;\">\r\n            <ui-button class=\"multi-packs-list__add-button\" @clicked=\"onAddPackClick\">\r\n                Добавить пак\r\n            </ui-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex';\r\nimport {openMultiPackModal} from '@/modals/addMultiPackModal';\r\nimport bus from '@/plugins/bus';\r\n\r\nexport default {\r\n    props: {\r\n        packs: Array\r\n    },\r\n    data: () => ({\r\n        ready: false,\r\n        packsList: [],\r\n        currenciesOptions: [],\r\n        selectedCurrencies: {},\r\n        rewardValues: {},\r\n        firstBonus: {}\r\n    }),\r\n    computed: {\r\n        currencies() {\r\n            return this.$store.state.currencies.list;\r\n        },\r\n        availableCurrencies() {\r\n            const usedCurrencies = [];\r\n            this.packsList.forEach(packData => {\r\n                packData.rewards.forEach(rewardData =>\r\n                    !usedCurrencies.includes(rewardData.id) && usedCurrencies.push(rewardData.id));\r\n            });\r\n            return this.$store.state.firebase.config.Currencies\r\n                .filter(currency => !usedCurrencies.includes(currency.id));\r\n        }\r\n    },\r\n    components: {\r\n        UiButton: () => import('../../components/ui/UiButton')\r\n    },\r\n    async created() {\r\n        await this.getConfig();\r\n        this.updateComponent();\r\n        bus.$off('products-list-updated').$on('products-list-updated', this.onProductsUpdated);\r\n    },\r\n    beforeDestroy() {\r\n        bus.$off('products-list-updated', this.onProductsUpdated);\r\n    },\r\n    methods: {\r\n        ...mapActions('firebase', ['getConfig', 'saveProduct', 'deleteProduct']),\r\n        updateComponent() {\r\n            this.packsList = this.packs;\r\n            this.packsList.forEach(pack => this.firstBonus[pack.id] = Math.max(pack.first_bonus, 0));\r\n            this.fillSelects();\r\n        },\r\n        onProductsUpdated(newProduct) {\r\n            newProduct && this.updateComponent();\r\n        },\r\n        fillSelects() {\r\n            this.currenciesOptions = this.$store.state.firebase.config.Currencies\r\n                .filter(currency => currency.id > 0)\r\n                .map(currency => {\r\n                    return {\r\n                        value: currency.id,\r\n                        text: currency.name\r\n                    };\r\n                });\r\n            this.packsList.forEach(pack => {\r\n                this.selectedCurrencies[pack.id] = pack.rewards.map(reward => reward.id);\r\n                this.rewardValues[pack.id] = pack.rewards.map(reward => reward.value);\r\n            });\r\n            this.ready = true;\r\n        },\r\n        onAddPackRewardClick(productId) {\r\n            this.packsList.find(p => p.id === productId).rewards.push({\r\n                id: this.availableCurrencies[0].id,\r\n                value: 0\r\n            });\r\n            this.fillSelects();\r\n        },\r\n        onDeletePackRewardClick(productId, currencyId) {\r\n            if (!confirm('Подтвердите удаление'))\r\n                return;\r\n            this.packsList.some(pack => {\r\n                if (pack.id === productId) {\r\n                    pack.rewards = pack.rewards.filter(reward => reward.id !== currencyId);\r\n                    return true;\r\n                }\r\n            });\r\n            this.forceUpdate();\r\n        },\r\n        async onSavePackClick(pack) {\r\n            const currenciesEntries = {};\r\n            const rewards = [];\r\n\r\n            for (let i = 0; i < this.selectedCurrencies[pack.id].length; i++) {\r\n                if (!this.rewardValues[pack.id][i]) {\r\n                    bus.$emit('show-notification-message', 'Не должно быть нулевых значений валют');\r\n                    return;\r\n                }\r\n\r\n                if (currenciesEntries[this.selectedCurrencies[pack.id][i]]) {\r\n                    const currencyConfig = this.currencies.find(c => c.id === this.selectedCurrencies[pack.id][i]);\r\n                    bus.$emit('show-notification-message', `Найдены дубликаты наград: ${currencyConfig.name}`);\r\n                    return;\r\n                } else\r\n                    currenciesEntries[this.selectedCurrencies[i]] = 1;\r\n\r\n                rewards.push({\r\n                    id: parseInt(this.selectedCurrencies[pack.id][i], 10),\r\n                    value: parseInt(this.rewardValues[pack.id][i], 10)\r\n                });\r\n            }\r\n\r\n            const data = {\r\n                id: pack.id,\r\n                google_id: pack.google_id,\r\n                apple_id: pack.apple_id,\r\n                first_bonus: parseInt(this.firstBonus[pack.id], 10) || 0,\r\n                rewards,\r\n            };\r\n            const response = await this.saveProduct(data);\r\n\r\n            if (!response.error) {\r\n                bus.$emit('show-notification-message', 'Обновлено');\r\n                this.$forceUpdate();\r\n            } else\r\n                bus.$emit('show-notification-message', `Ошибка: ${response.error.toString()}`);\r\n        },\r\n        async onDeletePackClick(productId) {\r\n            if (!confirm('Подтвердите удаление')) return;\r\n\r\n            const response = await this.deleteProduct(productId);\r\n\r\n            if (!response.error) {\r\n                bus.$emit('show-notification-message', 'Удалено');\r\n                this.packsList = this.packsList.filter(pack => pack.id !== productId);\r\n                this.forceUpdate();\r\n            } else\r\n                bus.$emit('show-notification-message', `Ошибка: ${response.error.toString()}`);\r\n        },\r\n        onAddPackClick() {\r\n            openMultiPackModal();\r\n        },\r\n        forceUpdate() {\r\n            this.$forceUpdate();\r\n            this.fillSelects();\r\n        },\r\n        onFirstBonusChange(packId, event) {\r\n            let value = parseInt(event.target.value, 10);\r\n            isNaN(value) && (value = 0);\r\n            this.firstBonus[packId] = value;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.multi-packs-list {\r\n    &__pack-name {\r\n        text-align: left;\r\n    }\r\n\r\n    &__table {\r\n        td {\r\n            vertical-align: middle;\r\n            width: 25%;\r\n        }\r\n    }\r\n\r\n    &__add-button {\r\n        float: left;\r\n        min-width: 200px;\r\n    }\r\n\r\n    &__pack {\r\n        border-bottom: 1px solid #2d4c70;\r\n        padding-bottom: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    img {\r\n        cursor: pointer;\r\n        max-width: 160px;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiPacksList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiPacksList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MultiPacksList.vue?vue&type=template&id=729fd3bc&\"\nimport script from \"./MultiPacksList.vue?vue&type=script&lang=js&\"\nexport * from \"./MultiPacksList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MultiPacksList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MultiPacksList.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}