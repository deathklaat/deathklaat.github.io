(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["prices"],{"60e4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.pageIsReady?n("div",{staticClass:"page prices-page"},[n("div",{staticClass:"page__title"},[n("nav-back"),e._v(" Справочник цен "),n("ui-button",{staticClass:"page__add-button",attrs:{color:"blue"},on:{clicked:e.onAddClick}},[e._v(" Добавить ")])],1),n("table",{staticClass:"users-list table table-striped"},[e._m(0),n("tbody",e._l(e.prices,(function(t,r){return n("tr",{key:r},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(e.getCurrencyName(t.money.id)))]),n("td",{staticStyle:{"max-width":"200px"}},[e._v(e._s(t.description))]),n("td",[e._v(e._s(t.money.value))]),n("td",[n("svg",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"bi bi-pencil page__active-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",title:"Редактировать"},on:{click:function(n){return e.onEditClick(t)}}},[n("path",{attrs:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}})])])])})),0)])]):e._e()},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("ID")]),n("th",{attrs:{scope:"col"}},[e._v("Валюта")]),n("th",{attrs:{scope:"col"}},[e._v("Описание")]),n("th",{attrs:{scope:"col"}},[e._v("Цена")]),n("th",{attrs:{scope:"col"}},[e._v("Действия")])])])}],i=n("1da1"),c=n("5530"),s=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("bc87")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-popup",on:{click:e.resetAlert,keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onAddClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[e._v(" Добавление ответа "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:e.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("label",{staticClass:"modal-popup__label"},[e._v("Описание")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],ref:"input",staticClass:"form-control",attrs:{placeholder:"Введите описание"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._v(" "),n("label",{staticClass:"modal-popup__label"},[e._v("Валюта")]),n("b-form-select",{staticClass:"form-control",attrs:{options:e.currenciesOptions},model:{value:e.selectedCurrencyValue,callback:function(t){e.selectedCurrencyValue=e._n(t)},expression:"selectedCurrencyValue"}}),n("label",{staticClass:"modal-popup__label"},[e._v("Цена")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.currencyPriceValue,expression:"currencyPriceValue",modifiers:{number:!0}}],staticClass:"form-control mt-2",attrs:{type:"number",min:"0",oninput:"validity.valid||(value=0)"},domProps:{value:e.currencyPriceValue},on:{input:function(t){t.target.composing||(e.currencyPriceValue=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:e.onAddClick}},[e._v("Добавить")]),e.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.alert))]):e._e()],1)},l=[],u=(n("d81d"),n("4de4"),n("b0c0"),n("a4d3"),n("e01a"),n("25f0"),n("2f62")),p=n("a70a"),d={data:function(){return{description:"",alert:"",canReset:!1,currenciesOptions:[],selectedCurrencyValue:0,currencyPriceValue:0}},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},computed:Object(c["a"])({},Object(u["c"])("firebase",["getNewPriceID"])),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getConfig();case 2:e.fillSelects();case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){this.$refs.input.focus()},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])("firebase",["getConfig","savePrice"])),{},{fillSelects:function(){this.currenciesOptions=this.$store.state.firebase.config.Currencies.filter((function(e){return e.id>0})).map((function(e){return{value:e.id,text:e.name}})),this.selectedCurrencyValue=this.currenciesOptions[0].value},resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(e){var t=this;this.alert=e,setTimeout((function(){return t.canReset=!0}),250)},onAddClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePrice({id:e.getNewPriceID,description:e.description,money:{id:e.selectedCurrencyValue,value:e.currencyPriceValue}});case 2:n=t.sent,n.error?alert("Ошибка: ".concat(n.error.toString())):(p["a"].$emit("show-notification-message","Добавлено"),e.close());case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.$modal.hide("add-price-modal")}})},m=d,v=n("2877"),f=Object(v["a"])(m,o,l,!1,null,null,null),h=f.exports,b=function(){var e=new s["a"]({component:h,props:{},params:{transition:"scale",name:"add-price-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});e.show()},_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-popup",on:{click:e.resetAlert,keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onSaveClick.apply(null,arguments):null}}},[n("div",{staticClass:"mb-3 modal-popup__title"},[e._v(" Редактирование ответа "),n("svg",{staticClass:"bi bi-x-lg modal-popup__close",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#2D4C70",viewBox:"0 0 16 16"},on:{click:e.close}},[n("path",{attrs:{d:"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"}})])]),n("label",{staticClass:"modal-popup__label"},[e._v("Описание")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{placeholder:"Введите описание"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._v(" "),n("label",{staticClass:"modal-popup__label"},[e._v("Валюта")]),n("b-form-select",{staticClass:"form-control",attrs:{options:e.currenciesOptions},model:{value:e.selectedCurrencyValue,callback:function(t){e.selectedCurrencyValue=e._n(t)},expression:"selectedCurrencyValue"}}),n("label",{staticClass:"modal-popup__label"},[e._v("Цена")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.currencyPriceValue,expression:"currencyPriceValue",modifiers:{number:!0}}],staticClass:"form-control mt-2",attrs:{type:"number",min:"0",oninput:"validity.valid||(value=0)"},domProps:{value:e.currencyPriceValue},on:{input:function(t){t.target.composing||(e.currencyPriceValue=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("ui-button",{staticClass:"mt-3 mb-2",on:{clicked:e.onSaveClick}},[e._v("Сохранить")]),e.alert.length?n("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.alert))]):e._e()],1)},g=[],C={props:{price:Object},data:function(){return{description:"Ожидание",selectedCurrencyValue:0,currencyPriceValue:0,currenciesOptions:[],alert:"",canReset:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getConfig();case 2:e.fillFields();case 3:case"end":return t.stop()}}),t)})))()},components:{UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])("firebase",["getConfig","savePrice"])),{},{fillFields:function(){this.currenciesOptions=this.$store.state.firebase.config.Currencies.filter((function(e){return e.id>0})).map((function(e){return{value:e.id,text:e.name}})),this.description=this.price.description,this.selectedCurrencyValue=this.price.money.id,this.currencyPriceValue=this.price.money.value},onSaveClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.savePrice({id:e.price.id,description:e.description,money:{id:e.selectedCurrencyValue,value:e.currencyPriceValue}});case 2:n=t.sent,n.error?p["a"].$emit("show-notification-message","Ошибка: ".concat(n.error.toString())):(p["a"].$emit("show-notification-message","Обновлено"),e.close());case 4:case"end":return t.stop()}}),t)})))()},resetAlert:function(){this.canReset&&(this.alert="",this.canReset=!1)},setAlert:function(e){var t=this;this.alert=e,setTimeout((function(){return t.canReset=!0}),250)},close:function(){this.$modal.hide("edit-price-modal")}})},w=C,y=Object(v["a"])(w,_,g,!1,null,null,null),k=y.exports,O=function(e){var t=new s["a"]({component:k,props:{price:e},params:{transition:"scale",name:"edit-price-modal",width:"100%",height:"100%",classes:"modal-popup__overlay"}});t.show()},x={data:function(){return{pageIsReady:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(u["c"])("firebase",["getCurrencyName"])),{},{prices:function(){return this.$store.state.firebase.config.Prices.prices}}),components:{NavBack:function(){return n.e("chunk-49c533a1").then(n.bind(null,"e019"))},UiButton:function(){return n.e("chunk-7a628425").then(n.bind(null,"832a"))}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getConfig();case 2:e.pageIsReady=!0;case 3:case"end":return t.stop()}}),t)})))()},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])("firebase",["getConfig"])),{},{onAddClick:function(){b()},onEditClick:function(e){O(e)}})},V=x,j=Object(v["a"])(V,r,a,!1,null,null,null);t["default"]=j.exports},bc87:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),a=n("bee2"),i=(n("b0c0"),n("1881")),c=n.n(i),s=function(){function e(t){var n=t.component,a=t.props,i=void 0===a?{}:a,c=t.params,s=void 0===c?{}:c,o=t.events,l=void 0===o?{}:o;Object(r["a"])(this,e),this.component=n,this.props=i,this.params=s,this.events={opened:function(){Object.assign(n,{modalName:s.name})},closed:function(){}},Object.assign(this.events,l)}return Object(a["a"])(e,[{key:"show",value:function(){c.a.rootInstance.$modal.show(this.component,this.props,this.params,this.events)}},{key:"hide",value:function(){c.a.rootInstance.$emit("close")}}]),e}()}}]);
//# sourceMappingURL=prices.d75998cf.js.map