{"version":3,"sources":["webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/views/Firebase/Chapter.vue?39b7","webpack:///src/views/Firebase/Chapter.vue","webpack:///./src/views/Firebase/Chapter.vue?cf61","webpack:///./src/views/Firebase/Chapter.vue","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/views/Firebase/Chapter.vue?2a95"],"names":["module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","name","title","class","anyChanges","attrs","saveButtonColor","on","onSaveClick","saveButtonText","staticStyle","directives","rawName","modifiers","$event","clip","storyId","id","_e","value","expression","titleChanged","domProps","target","composing","descriptionChanged","description","googleSheetChanged","googleSheetId","readingTimeChanged","readingTimeText","_l","config","i","key","time","onReadingTimeSelect","text","readingRuleChanged","readingCurrencyText","currency","onReadingCurrencyChanged","readingCost","_n","$forceUpdate","rewardsChanged","reward","undefined","selectedRewardOptions","currency_id","onRewardsClick","currenciesOptions","model","callback","$$v","$set","rewardValues","isDefaultReward","deleteReward","rewards","length","getAvailableCurrencies","addReward","resetRewardToDefault","staticRenderFns","DuplicateRewardException","currencyId","chapterData","google_sheet_id","alert","Object","entries","reward_default","bus","component","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","index","code","it","charCodeAt","NaN","slice","parseInt","NumberWrapper","arguments","dummy","valueOf","call","keys","split","j","constructor"],"mappings":"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","file":"js/chapters.39b13757.js","sourcesContent":["// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chapter-page page\"},[_c('div',{staticClass:\"chapter-page__header\"},[_c('div',{staticClass:\"chapter-page__header-left\"},[_c('nav-back'),_c('div',{staticClass:\"chapter-page__number\"},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"chapter-page__title\"},[_vm._v(_vm._s(_vm.title))])],1),_c('div',{staticClass:\"chapter-page__header-right\"},[_c('ui-button',{staticClass:\"chapter-page__save-button\",class:{'chapter-page__save-button--disabled': !_vm.anyChanges},attrs:{\"color\":_vm.saveButtonColor},on:{\"clicked\":_vm.onSaveClick}},[_vm._v(\" \"+_vm._s(_vm.saveButtonText)+\" \")])],1)]),(_vm.id)?_c('div',{staticClass:\"row mt-3 ml-1\",staticStyle:{\"position\":\"relative\",\"margin-bottom\":\"-20px\"}},[_c('div',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"chapter-page__story-id mr-2\",attrs:{\"title\":\"Скопировать ID истории\"},on:{\"click\":function($event){return _vm.clip(_vm.storyId)}}},[_vm._v(\" ID истории: \"+_vm._s(_vm.storyId)+\" \")]),_c('div',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"chapter-page__story-id\",attrs:{\"title\":\"Скопировать ID главы\"},on:{\"click\":function($event){return _vm.clip(_vm.id)}}},[_vm._v(\" ID главы: \"+_vm._s(_vm.id)+\" \")])]):_vm._e(),_c('div',{staticClass:\"chapter-page__content d-flex mb-3\"},[_c('div',{staticClass:\"page__title row\"},[_vm._v(\"Описание главы\")]),_c('div',{staticClass:\"row page__input\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"page__input-title\",attrs:{\"for\":\"chapterTitleInput\"}},[_vm._v(\"Название\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],staticClass:\"form-control\",class:{'data-changed': _vm.titleChanged},attrs:{\"type\":\"text\",\"id\":\"chapterTitleInput\",\"placeholder\":\"Название\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}})])]),_c('div',{staticClass:\"row page__input\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"page__input-title\"},[_vm._v(\"Краткое описание\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",class:{'data-changed': _vm.descriptionChanged},attrs:{\"id\":\"chapterDescriptionInput\",\"rows\":\"3\",\"placeholder\":\"Описание\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}})])]),_c('div',{staticClass:\"row page__input\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"page__input-title\",attrs:{\"for\":\"googleSheetId\"}},[_vm._v(\"ID Google таблицы\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.googleSheetId),expression:\"googleSheetId\"}],staticClass:\"form-control\",class:{'data-changed': _vm.googleSheetChanged},attrs:{\"type\":\"text\",\"id\":\"googleSheetId\",\"placeholder\":\"ID таблицы\"},domProps:{\"value\":(_vm.googleSheetId)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.googleSheetId=$event.target.value}}})])]),_c('div',{staticClass:\"row page__sub-row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"page__input-title\"},[_vm._v(\"Время чтения\")]),_c('br'),_c('b-dropdown',{staticClass:\"m-md-2 chapter-page__filter-dropdown page__input-small ml-4\",class:{'data-changed': _vm.readingTimeChanged},attrs:{\"text\":_vm.readingTimeText}},_vm._l((_vm.readingTime),function(config,i){return _c('b-dropdown-item',{key:i,attrs:{\"data-value\":config.time},on:{\"click\":_vm.onReadingTimeSelect}},[_vm._v(\" \"+_vm._s(config.text)+\" \")])}),1)],1)])]),_c('div',{staticClass:\"row page__sub-row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"page__input-title\"},[_vm._v(\"Стоимость чтения\")]),_c('br'),_c('b-dropdown',{staticClass:\"m-md-2\",class:{'data-changed': _vm.readingRuleChanged},attrs:{\"text\":_vm.readingCurrencyText,\"id\":\"storyCharacterRestriction\"}},_vm._l((_vm.currenciesOptions),function(currency){return _c('b-dropdown-item',{key:currency.value,attrs:{\"data-value\":currency.value},on:{\"click\":_vm.onReadingCurrencyChanged}},[_vm._v(\" \"+_vm._s(currency.text)+\" \")])}),1),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.readingCost),expression:\"readingCost\",modifiers:{\"number\":true}}],staticClass:\"form-control mt-2\",class:{'data-changed': _vm.readingRuleChanged},attrs:{\"type\":\"number\",\"placeholder\":\"0\",\"min\":\"0\",\"oninput\":\"validity.valid||(value=0)\"},domProps:{\"value\":(_vm.readingCost)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.readingCost=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})],1)])]),_c('label',{staticClass:\"chapter-page__label\",class:{'data-changed': _vm.rewardsChanged}},[_vm._v(\" Награды за прохождение главы \")]),_vm._l((_vm.rewards),function(reward){return (typeof _vm.selectedRewardOptions[(\"currency-\" + (reward.currency_id))] !== undefined)?_c('div',{key:reward.currency_id,staticClass:\"mb-4\",on:{\"click\":_vm.onRewardsClick}},[_c('div',{staticClass:\"d-flex flex-row align-items-center\"},[_c('div',{staticClass:\"d-flex flex-column\"},[_c('b-form-select',{staticClass:\"form-control chapter-page__reward-input\",attrs:{\"options\":_vm.currenciesOptions},model:{value:(_vm.selectedRewardOptions[(\"currency-\" + (reward.currency_id))]),callback:function ($$v) {_vm.$set(_vm.selectedRewardOptions, (\"currency-\" + (reward.currency_id)), $$v)},expression:\"selectedRewardOptions[`currency-${reward.currency_id}`]\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.rewardValues[(\"currency-\" + (reward.currency_id))]),expression:\"rewardValues[`currency-${reward.currency_id}`]\",modifiers:{\"number\":true}}],staticClass:\"form-control mt-2 chapter-page__reward-input\",attrs:{\"type\":\"number\",\"placeholder\":\"Количество\",\"min\":\"0\",\"oninput\":\"validity.valid||(value=0)\"},domProps:{\"value\":(_vm.rewardValues[(\"currency-\" + (reward.currency_id))])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.rewardValues, (\"currency-\" + (reward.currency_id)), _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})],1),_c('div',{staticClass:\"d-flex flex-column\"},[(!_vm.isDefaultReward)?_c('svg',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover\",modifiers:{\"hover\":true}}],staticClass:\"bi bi-x-circle ml-4 story-page__reset-reward\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"32\",\"height\":\"32\",\"fill\":\"currentColor\",\"title\":\"Удалить награду\",\"viewBox\":\"0 0 16 16\"},on:{\"click\":function($event){return _vm.deleteReward(reward.currency_id)}}},[_c('path',{attrs:{\"d\":\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"}}),_c('path',{attrs:{\"d\":\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"}})]):_vm._e()])])]):_vm._e()}),(!_vm.rewards.length)?_c('span',{staticClass:\"mb-3 mt-1\",staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\"Отсутствуют\")]):_vm._e(),(_vm.getAvailableCurrencies().length)?_c('ui-button',{staticClass:\"mb-2\",staticStyle:{\"max-width\":\"290px\"},attrs:{\"color\":\"transparent\"},on:{\"clicked\":_vm.addReward}},[_vm._v(\" Добавить награду \")]):_vm._e(),_c('ui-button',{staticStyle:{\"max-width\":\"290px\"},attrs:{\"color\":\"transparent\"},on:{\"clicked\":_vm.resetRewardToDefault}},[_vm._v(\" Сбросить награды на дефолт \")])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"chapter-page page\">\r\n        <div class=\"chapter-page__header\">\r\n            <div class=\"chapter-page__header-left\">\r\n                <nav-back/>\r\n                <div class=\"chapter-page__number\">{{ name }}</div>\r\n                <div class=\"chapter-page__title\">{{ title }}</div>\r\n            </div>\r\n            <div class=\"chapter-page__header-right\">\r\n                <ui-button class=\"chapter-page__save-button\" :color=\"saveButtonColor\" @clicked=\"onSaveClick\"\r\n                           :class=\"{'chapter-page__save-button--disabled': !anyChanges}\"\r\n                >\r\n                    {{ saveButtonText }}\r\n                </ui-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"row mt-3 ml-1\" style=\"position: relative; margin-bottom: -20px;\" v-if=\"id\">\r\n            <div class=\"chapter-page__story-id mr-2\" v-b-tooltip.hover title=\"Скопировать ID истории\"\r\n                 @click=\"clip(storyId)\"\r\n            >\r\n                ID истории: {{ storyId }}\r\n            </div>\r\n            <div class=\"chapter-page__story-id\" v-b-tooltip.hover title=\"Скопировать ID главы\"\r\n                 @click=\"clip(id)\"\r\n            >\r\n                ID главы: {{ id }}\r\n            </div>\r\n        </div>\r\n        <div class=\"chapter-page__content d-flex mb-3\">\r\n            <div class=\"page__title row\">Описание главы</div>\r\n            <div class=\"row page__input\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"chapterTitleInput\" class=\"page__input-title\">Название</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"chapterTitleInput\"\r\n                           placeholder=\"Название\" v-model=\"title\"\r\n                           :class=\"{'data-changed': titleChanged}\"\r\n                    >\r\n                </div>\r\n            </div>\r\n            <div class=\"row page__input\">\r\n                <div class=\"form-group\">\r\n                    <label class=\"page__input-title\">Краткое описание</label>\r\n                    <textarea class=\"form-control\" id=\"chapterDescriptionInput\" rows=\"3\"\r\n                              placeholder=\"Описание\" v-model=\"description\"\r\n                              :class=\"{'data-changed': descriptionChanged}\"\r\n                    ></textarea>\r\n                </div>\r\n            </div>\r\n            <div class=\"row page__input\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"googleSheetId\" class=\"page__input-title\">ID Google таблицы</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"googleSheetId\"\r\n                           placeholder=\"ID таблицы\" v-model=\"googleSheetId\"\r\n                           :class=\"{'data-changed': googleSheetChanged}\"\r\n                    >\r\n                </div>\r\n            </div>\r\n            <div class=\"row page__sub-row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label class=\"page__input-title\">Время чтения</label><br/>\r\n                        <b-dropdown :text=\"readingTimeText\"\r\n                                    class=\"m-md-2 chapter-page__filter-dropdown page__input-small ml-4\"\r\n                                    :class=\"{'data-changed': readingTimeChanged}\"\r\n                        >\r\n                            <b-dropdown-item v-for=\"(config, i) of readingTime\" :key=\"i\" :data-value=\"config.time\"\r\n                                             @click=\"onReadingTimeSelect\"\r\n                            >\r\n                                {{ config.text }}\r\n                            </b-dropdown-item>\r\n                        </b-dropdown>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row page__sub-row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label class=\"page__input-title\">Стоимость чтения</label><br/>\r\n                        <b-dropdown :text=\"readingCurrencyText\" id=\"storyCharacterRestriction\" class=\"m-md-2\"\r\n                                    :class=\"{'data-changed': readingRuleChanged}\">\r\n                            <b-dropdown-item v-for=\"currency of currenciesOptions\" :key=\"currency.value\"\r\n                                             :data-value=\"currency.value\"\r\n                                             @click=\"onReadingCurrencyChanged\"\r\n                            >\r\n                                {{ currency.text }}\r\n                            </b-dropdown-item>\r\n                        </b-dropdown>\r\n                        <input type=\"number\" class=\"form-control mt-2\" placeholder=\"0\" v-model.number=\"readingCost\"\r\n                               :class=\"{'data-changed': readingRuleChanged}\"\r\n                               min=0 oninput=\"validity.valid||(value=0)\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <label class=\"chapter-page__label\" :class=\"{'data-changed': rewardsChanged}\">\r\n                Награды за прохождение главы\r\n            </label>\r\n            <div v-for=\"(reward) of rewards\" :key=\"reward.currency_id\" class=\"mb-4\" @click=\"onRewardsClick\"\r\n                 v-if=\"typeof selectedRewardOptions[`currency-${reward.currency_id}`] !== undefined\"\r\n            >\r\n                <div class=\"d-flex flex-row align-items-center\">\r\n                    <div class=\"d-flex flex-column\">\r\n                        <b-form-select v-model=\"selectedRewardOptions[`currency-${reward.currency_id}`]\"\r\n                                       :options=\"currenciesOptions\"\r\n                                       class=\"form-control chapter-page__reward-input\"/>\r\n                        <input type=\"number\" placeholder=\"Количество\"\r\n                               class=\"form-control mt-2 chapter-page__reward-input\"\r\n                               v-model.number=\"rewardValues[`currency-${reward.currency_id}`]\"\r\n                               min=0 oninput=\"validity.valid||(value=0)\"\r\n                        >\r\n                    </div>\r\n                    <div class=\"d-flex flex-column\">\r\n                        <svg v-if=\"!isDefaultReward\"\r\n                             xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\"\r\n                             v-b-tooltip.hover title=\"Удалить награду\" @click=\"deleteReward(reward.currency_id)\"\r\n                             class=\"bi bi-x-circle ml-4 story-page__reset-reward\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\r\n                            <path\r\n                                d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <span v-if=\"!rewards.length\" class=\"mb-3 mt-1\" style=\"font-size: 16px;\">Отсутствуют</span>\r\n            <ui-button color=\"transparent\" @clicked=\"addReward\" class=\"mb-2\"\r\n                       style=\"max-width: 290px;\"\r\n                       v-if=\"getAvailableCurrencies().length\"\r\n            >\r\n                Добавить награду\r\n            </ui-button>\r\n            <ui-button color=\"transparent\" @clicked=\"resetRewardToDefault\"\r\n                       style=\"max-width: 290px;\"\r\n            >\r\n                Сбросить награды на дефолт\r\n            </ui-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapGetters, mapMutations, mapState} from 'vuex';\r\nimport bus from '@/plugins/bus';\r\n\r\nfunction DuplicateRewardException(currencyId) {\r\n    this.currencyId = currencyId;\r\n}\r\n\r\nexport default {\r\n    props: {\r\n        chapterId: Number,\r\n        storyId: Number,\r\n        chapterData: Object\r\n    },\r\n    data: () => ({\r\n        isNewChapter: false,\r\n        id: 0,\r\n        name: '',\r\n        title: 'Новая глава',\r\n        description: 'Описание главы',\r\n        googleSheetId: '',\r\n        readingTimeOption: 0,\r\n        rewards: [],\r\n\r\n        anyChanges: false,\r\n        dataFetched: false,\r\n\r\n        // data changes\r\n        idChanged: false,\r\n        titleChanged: false,\r\n        descriptionChanged: false,\r\n        readingTimeChanged: false,\r\n        googleSheetChanged: false,\r\n        rewardsChanged: false,\r\n\r\n        currenciesOptions: [\r\n            {\r\n                value: 0,\r\n                text: 'Ожидание'\r\n            }\r\n        ],\r\n        selectedRewardOptions: {},\r\n        rewardValues: {},\r\n\r\n        isDefaultReward: true,\r\n\r\n        readingCost: 1,\r\n        readingCurrencyOption: 2,\r\n        readingCurrencyText: '',\r\n        readingRuleChanged: false\r\n    }),\r\n    components: {\r\n        UiButton: () => import('../../components/ui/UiButton'),\r\n        NavBack: () => import('../../components/navigation/NavBack'),\r\n    },\r\n    computed: {\r\n        ...mapState('firebase', ['config']),\r\n        ...mapState('stories', ['storyStatuses', 'readingTime']),\r\n        ...mapGetters('firebase', ['getNewChapterID', 'getNextChapterOrder']),\r\n        economyConfig() {\r\n            return this.$store.state.firebase.config.EconomyConfig || {};\r\n        },\r\n        currencies() {\r\n            return this.$store.state.firebase.config.Currencies;\r\n        },\r\n        readingTimeText() {\r\n            const config = this.readingTime.find(story => story.time === this.readingTimeOption);\r\n            return config ? config.text : 'Ошибка';\r\n        },\r\n        realStoryId() {\r\n            return this.storyId || 0;\r\n        },\r\n        saveButtonText() {\r\n            return this.anyChanges ? 'Сохранить' : 'Сохранено';\r\n        },\r\n        saveButtonColor() {\r\n            return this.anyChanges ? 'blue' : 'transparent';\r\n        },\r\n    },\r\n    async mounted() {\r\n        await this.fetchData();\r\n    },\r\n    watch: {\r\n        id() {\r\n            this.changesCommonHandler('id');\r\n        },\r\n        title() {\r\n            this.changesCommonHandler('title');\r\n        },\r\n        description() {\r\n            this.changesCommonHandler('description');\r\n        },\r\n        googleSheetId() {\r\n            this.changesCommonHandler('googleSheet');\r\n        },\r\n        readingTimeOption() {\r\n            this.changesCommonHandler('readingTime');\r\n        },\r\n        readingCurrencyOption() {\r\n            this.changesCommonHandler('readingRule');\r\n        },\r\n        readingCost() {\r\n            this.changesCommonHandler('readingRule');\r\n        },\r\n    },\r\n    methods: {\r\n        ...mapActions('firebase', ['getConfig', 'saveStoryChapter']),\r\n        ...mapMutations('firebase', ['SET_CHAPTER_DEFAULT_REWARD']),\r\n        async fetchData() {\r\n            await this.getConfig();\r\n\r\n            if (this.chapterData) {\r\n                this.id = this.chapterData.id;\r\n                this.title = this.chapterData.title;\r\n                this.description = this.chapterData.description;\r\n                this.readingTimeOption = this.chapterData.reading_time;\r\n                this.name = this.chapterData.name;\r\n                this.googleSheetId = this.chapterData.google_sheet_id;\r\n                this.isDefaultReward = this.chapterData.reward_default;\r\n                this.readingCurrencyOption = this.chapterData.reading_currency_id || this.economyConfig.chapter_reading_currency_id;\r\n                this.readingCost = this.chapterData.reading_currency_value || this.economyConfig.chapter_reading_currency_value;\r\n\r\n                if (this.chapterData.rewards.length)\r\n                    this.rewards = this.chapterData.rewards || [{\r\n                        currency_id: this.config.EconomyConfig.chapter_reward_currency_id,\r\n                        value: this.config.EconomyConfig.chapter_reward_currency_value,\r\n                    }];\r\n                else\r\n                    this.setDefaultReward();\r\n            } else {\r\n                this.isNewChapter = true;\r\n                this.id = this.getNewChapterID;\r\n                this.readingTimeOption = this.readingTime[0].time;\r\n                this.readingCurrencyOption = this.economyConfig.chapter_reading_currency_id;\r\n                this.readingCost = this.economyConfig.chapter_reading_currency_value;\r\n                this.setDefaultReward();\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.dataFetched = true;\r\n            }, 250);\r\n\r\n            this.fillSelects();\r\n        },\r\n        addReward() {\r\n            const availableCurrencies = this.getAvailableCurrencies();\r\n\r\n            if (!availableCurrencies.length)\r\n                return;\r\n\r\n            this.rewards.push({\r\n                currency_id: availableCurrencies[0].id,\r\n                value: 0\r\n            });\r\n            this.selectedRewardOptions[`currency-${availableCurrencies[0].id}`] = availableCurrencies[0].id;\r\n            this.rewardValues[`currency-${availableCurrencies[0].id}`] = 0;\r\n\r\n            this.isDefaultReward = false;\r\n        },\r\n        deleteReward(currencyId) {\r\n            this.rewards = this.rewards.filter(r => r.currency_id !== currencyId);\r\n            delete this.selectedRewardOptions[`currency-${currencyId}`];\r\n            delete this.rewardValues[`currency-${currencyId}`];\r\n            !this.rewards.length && this.isDefaultReward && this.setDefaultReward();\r\n        },\r\n        setDefaultReward() {\r\n            this.rewards = [{\r\n                currency_id: this.config.EconomyConfig.chapter_reward_currency_id,\r\n                value: this.config.EconomyConfig.chapter_reward_currency_value,\r\n            }];\r\n            this.selectedRewardOptions = {\r\n                [`currency-${this.config.EconomyConfig.chapter_reward_currency_id}`]: this.config.EconomyConfig.chapter_reward_currency_id\r\n            };\r\n            this.rewardValues = {\r\n                [`currency-${this.config.EconomyConfig.chapter_reward_currency_id}`]: this.config.EconomyConfig.chapter_reward_currency_value\r\n            };\r\n            this.isDefaultReward = true;\r\n        },\r\n        fillSelects() {\r\n            this.currenciesOptions = this.currencies\r\n                .filter(currency => currency.id > 0)\r\n                .map(currency => {\r\n                    return {\r\n                        value: currency.id,\r\n                        text: currency.name\r\n                    };\r\n                });\r\n\r\n            const readingCurrencyData = this.currenciesOptions.find(c => c.value === this.readingCurrencyOption);\r\n            this.readingCurrencyOption = readingCurrencyData.value;\r\n            this.readingCurrencyText = readingCurrencyData.text;\r\n\r\n            if (this.rewards.length && !this.isDefaultReward) {\r\n                this.rewards.forEach((reward) => {\r\n                    this.selectedRewardOptions[`currency-${reward.currency_id}`] = reward.currency_id;\r\n                    this.rewardValues[`currency-${reward.currency_id}`] = reward.value;\r\n                });\r\n            } else if (this.isDefaultReward) {\r\n                this.rewards = [{\r\n                    currency_id: this.config.EconomyConfig.chapter_reward_currency_id,\r\n                    value: this.config.EconomyConfig.story_reward_currency_value\r\n                }];\r\n                this.selectedRewardOptions[`currency-${this.config.EconomyConfig.chapter_reward_currency_id}`] = this.config.EconomyConfig.chapter_reward_currency_id;\r\n                this.rewardValues[`currency-${this.config.EconomyConfig.chapter_reward_currency_id}`] = this.config.EconomyConfig.chapter_reward_currency_value;\r\n            }\r\n        },\r\n        changesCommonHandler(fieldName) {\r\n            if (!this.dataFetched) return;\r\n            this.anyChanges = true;\r\n            this[`${fieldName}Changed`] = true;\r\n        },\r\n        onReadingTimeSelect(event) {\r\n            this.readingTimeOption = parseInt(event.currentTarget.dataset.value, 10);\r\n        },\r\n        async onSaveClick() {\r\n            const chapterData = {};\r\n\r\n            if (this.googleSheetId.length) {\r\n                chapterData.google_sheet_id = this.googleSheetId;\r\n            } else {\r\n                alert('Необходимо заполнить ID google таблицы для главы');\r\n                return;\r\n            }\r\n\r\n            chapterData.id = this.id;\r\n            chapterData.story_id = this.storyId;\r\n            chapterData.is_published = false;\r\n            chapterData.order = this.chapterData ? this.chapterData.order : this.getNextChapterOrder(this.storyId);\r\n            chapterData.title = this.title;\r\n            chapterData.description = this.description;\r\n            chapterData.reading_time = parseInt(this.readingTimeOption, 10);\r\n            chapterData.reading_currency_id = this.readingCurrencyOption;\r\n            chapterData.reading_currency_value = parseInt(this.readingCost, 10);\r\n\r\n            if (this.rewardsChanged) {\r\n                let rewardsCounter = {};\r\n                chapterData.rewards = [{\r\n                    currency_id: this.config.EconomyConfig.chapter_reward_currency_id,\r\n                    value: this.config.EconomyConfig.chapter_reward_currency_value,\r\n                }];\r\n                Object.entries(this.selectedRewardOptions).forEach(([key, currencyId]) => {\r\n                    chapterData.rewards.push({\r\n                        currency_id: currencyId,\r\n                        value: parseInt(this.rewardValues[key], 10)\r\n                    });\r\n\r\n                    if (!rewardsCounter[currencyId]) rewardsCounter[currencyId] = 1;\r\n                    else rewardsCounter[currencyId]++;\r\n                });\r\n\r\n                try {\r\n                    Object.entries(rewardsCounter).forEach(([currencyId, count]) => {\r\n                        if (count > 1) throw new DuplicateRewardException(parseInt(currencyId), 10);\r\n                    });\r\n                } catch (e) {\r\n                    if (!e.currencyId) {\r\n                        throw e;\r\n                    } else {\r\n                        const currency = this.currencies.find(c => c.id === e.currencyId);\r\n                        bus.$emit('show-notification-message', `Дублирующаяся награда: ${currency.name}`);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                chapterData.reward_default = this.isDefaultReward = false;\r\n            } else if (this.isNewChapter) {\r\n                chapterData.rewards = [{\r\n                    currency_id: this.economyConfig.chapter_reward_currency_id,\r\n                    value: this.economyConfig.chapter_reward_currency_value\r\n                }];\r\n                chapterData.reward_default = true;\r\n            }\r\n\r\n            // дописываем то, что раньше подставлял бэкенд\r\n            if (this.isNewChapter) {\r\n                chapterData.created_at = new Date().toISOString();\r\n                chapterData.is_published = false;\r\n                chapterData.order = this.getNextChapterOrder(this.storyId);\r\n            } else\r\n                Object.keys(this.chapterData).forEach(key => {\r\n                    !chapterData.hasOwnProperty(key) && (chapterData[key] = this.chapterData[key]);\r\n                });\r\n\r\n            const response = await this.saveStoryChapter({\r\n                storyId: parseInt(this.realStoryId, 10),\r\n                chapterData\r\n            });\r\n\r\n            if (!response.error) {\r\n                bus.$emit('show-notification-message', 'Сохранено');\r\n                this.resetChangedFlags();\r\n\r\n                if (this.isNewChapter)\r\n                    await this.$router.push({\r\n                        name: 'chapters',\r\n                        params: {\r\n                            chapterId: this.id,\r\n                            storyId: this.storyId,\r\n                            chapterData\r\n                        },\r\n                        hash: `/${this.id}`\r\n                    });\r\n            } else {\r\n                bus.$emit('show-notification-message', `Ошибка: ${response.error.toString()}`);\r\n            }\r\n        },\r\n        async resetRewardToDefault() {\r\n            this.SET_CHAPTER_DEFAULT_REWARD({\r\n                storyId: this.storyId,\r\n                chapterId: this.id\r\n            });\r\n            this.setDefaultReward();\r\n        },\r\n        resetChangedFlags() {\r\n            this.anyChanges = false;\r\n            this.idChanged = false;\r\n            this.titleChanged = false;\r\n            this.descriptionChanged = false;\r\n            this.readingTimeChanged = false;\r\n            this.rewardsChanged = false;\r\n            this.readingRuleChanged = false;\r\n        },\r\n        getAvailableCurrencies() {\r\n            const usedCurrencies = Object.keys(this.selectedRewardOptions)\r\n                .map(c => parseInt(c.split('currency-')[1], 10));\r\n            return this.currencies.filter(c => usedCurrencies.indexOf(c.id) === -1 && c.id > 0);\r\n        },\r\n        onRewardsClick() {\r\n            this.anyChanges = true;\r\n            this.rewardsChanged = true;\r\n        },\r\n        clipStoryId() {\r\n            this.$clipboard(this.storyId);\r\n            bus.$emit('show-notification-message', 'ID скопирован в буфер обмена');\r\n        },\r\n        clip(id) {\r\n            this.$clipboard(id);\r\n            bus.$emit('show-notification-message', 'ID скопирован в буфер обмена');\r\n        },\r\n        onReadingCurrencyChanged(event) {\r\n            this.readingCurrencyOption = parseInt(event.currentTarget.dataset.value, 10);\r\n            this.readingCurrencyText = this.currenciesOptions.find(c => c.value === this.readingCurrencyOption).text;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../assets/scss/variables\";\r\n\r\n.chapter-page {\r\n    &__story-id,\r\n    &__chapter-id {\r\n        font-size: 16px;\r\n        user-select: text;\r\n        text-decoration: underline;\r\n        cursor: pointer;\r\n        font-weight: 700;\r\n    }\r\n\r\n    &__header {\r\n        display: flex;\r\n        text-align: left;\r\n        float: left;\r\n        flex-direction: row;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        position: relative;\r\n        padding-bottom: 20px;\r\n\r\n        &:after {\r\n            content: '';\r\n            display: block;\r\n            position: absolute;\r\n            background: #9AAABC;\r\n            width: 200vw;\r\n            height: 1px;\r\n            bottom: 0;\r\n            left: -100vw;\r\n        }\r\n    }\r\n\r\n    &__header-left {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    &__header-right {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    &__number {\r\n        font-weight: 700;\r\n        font-size: 32px;\r\n        margin-right: 32px;\r\n    }\r\n\r\n    &__title {\r\n        font-weight: 700;\r\n        font-size: 24px;\r\n        margin-top: 6px;\r\n    }\r\n\r\n    &__save-button {\r\n        margin-left: 24px;\r\n\r\n        &--disabled {\r\n            pointer-events: none;\r\n        }\r\n    }\r\n\r\n    &__content {\r\n        padding-top: 16px;\r\n        text-align: left;\r\n        font-weight: 700;\r\n        font-size: 24px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: flex-start;\r\n\r\n        .page-title {\r\n            margin-bottom: 32px !important;\r\n        }\r\n\r\n        .row,\r\n        .col {\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n\r\n        .col {\r\n            max-width: 288px;\r\n        }\r\n    }\r\n\r\n    .row {\r\n        margin-bottom: 16px;\r\n    }\r\n\r\n    &__delete-button {\r\n        text-transform: uppercase;\r\n        font-size: 14px;\r\n        max-width: 232px;\r\n        margin-bottom: 154px;\r\n    }\r\n\r\n    &__status-dropdown {\r\n        button {\r\n            padding-right: 24px;\r\n        }\r\n    }\r\n\r\n    &__label {\r\n        box-shadow: none !important;\r\n        font-size: 16px;\r\n    }\r\n\r\n    &__reward-input {\r\n        max-width: 270px;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chapter.vue?vue&type=template&id=60f6dbb4&\"\nimport script from \"./Chapter.vue?vue&type=script&lang=js&\"\nexport * from \"./Chapter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chapter.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapter.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}