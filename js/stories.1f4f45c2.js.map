{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/assets/svg/ic_filter.svg","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/lib/Popup.js","webpack:///./src/views/Firebase/Stories.vue?63b8","webpack:///./src/components/modals/PickStoryModal.vue?3de8","webpack:///src/components/modals/PickStoryModal.vue","webpack:///./src/components/modals/PickStoryModal.vue?3e78","webpack:///./src/components/modals/PickStoryModal.vue","webpack:///src/views/Firebase/Stories.vue","webpack:///./src/views/Firebase/Stories.vue?fbd1","webpack:///./src/views/Firebase/Stories.vue","webpack:///./src/views/Firebase/Stories.vue?6bdb"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","length","index","code","it","charCodeAt","NaN","slice","parseInt","key","NumberWrapper","value","arguments","dummy","this","valueOf","call","keys","split","j","constructor","Popup","component","props","params","events","Object","assign","modalName","name","VueJSModal","rootInstance","$modal","show","$emit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","stories","directives","rawName","expression","attrs","domProps","showAllStories","_i","on","$event","$$a","$$el","target","$$c","checked","$$v","$$i","concat","onCategoryFilterClick","resetSearchFields","onAddStoryClick","composing","searchStoryId","searchStoryName","onSearchButtonClick","_e","_l","story","id","onStoryClick","searchResultList","nonCategoriesStories","category","i","availableCategoriesIds","includes","_b","onCategoryStoryMoved","storyDragging","onCategoryStoryOrderChange","model","callback","$set","storyDragOptions","onCategoryFilterCloseClick","ref","sortCategories","staticRenderFns","close","options","selectedStoryId","onAddClick","bus"],"mappings":"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","file":"js/stories.1f4f45c2.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","module.exports = __webpack_public_path__ + \"img/ic_filter.1e3f3870.svg\";","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","import VueJSModal from \"vue-js-modal\";\r\n\r\nexport default class Popup {\r\n    constructor({component, props = {}, params = {}, events = {}}) {\r\n        this.component = component;\r\n        this.props = props;\r\n        this.params = params;\r\n        this.events = {\r\n            'opened': () => {\r\n                Object.assign(component, {modalName: params.name});\r\n            },\r\n            'closed': () => {\r\n            }\r\n        };\r\n        \r\n        Object.assign(this.events, events);\r\n    }\r\n    \r\n    show() {\r\n        VueJSModal.rootInstance.$modal.show(this.component, this.props, this.params, this.events);\r\n    }\r\n    \r\n    hide() {\r\n        VueJSModal.rootInstance.$emit('close');\r\n    }\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.pageIsReady)?_c('div',{staticClass:\"stories-page page\"},[_c('div',{staticClass:\"stories-page__header\"},[_c('div',{staticClass:\"page__title mb-0\"},[_c('nav-back'),_vm._v(\" Истории \"),_c('span',{staticClass:\"stories-page__counter\"},[_vm._v(_vm._s(Object.keys(_vm.stories).length))])],1),_c('div',{staticClass:\"stories-page__right-block d-flex\"},[_c('div',{staticClass:\"stories-page__all-stories-checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.showAllStories),expression:\"showAllStories\"}],staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.showAllStories)?_vm._i(_vm.showAllStories,null)>-1:(_vm.showAllStories)},on:{\"change\":function($event){var $$a=_vm.showAllStories,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.showAllStories=$$a.concat([$$v]))}else{$$i>-1&&(_vm.showAllStories=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.showAllStories=$$c}}}}),_c('label',[_vm._v(\"Показать все истории\")])]),_c('ui-button',{staticClass:\"stories-page__filter-button d-flex\",attrs:{\"color\":\"transparent\"},on:{\"clicked\":_vm.onCategoryFilterClick}},[_vm._v(\" Фильтр \"),_c('img',{staticClass:\"stories-page__filter-icon\",attrs:{\"src\":require('../../assets/svg/ic_filter.svg'),\"width\":\"22\",\"height\":\"20\"}})]),_c('ui-button',{on:{\"clicked\":_vm.resetSearchFields}},[_vm._v(\"Поиск\")]),_c('ui-button',{staticClass:\"stories-page__add-story-button d-flex\",attrs:{\"color\":\"blue\"},on:{\"clicked\":_vm.onAddStoryClick}},[_vm._v(\" Добавить историю \")])],1)]),(_vm.showSearchPanel)?_c('div',{staticClass:\"stories-page__search-panel form-group\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"ID истории\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchStoryId),expression:\"searchStoryId\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchStoryId)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchStoryId=$event.target.value}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Название истории\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchStoryName),expression:\"searchStoryName\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.searchStoryName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchStoryName=$event.target.value}}})]),_c('ui-button',{on:{\"clicked\":_vm.onSearchButtonClick}},[_vm._v(\"Найти\")])],1):_vm._e(),(_vm.showAllStories)?_c('div',{staticClass:\"stories-page__list\"},[_c('div',{staticClass:\"stories-page__category-title\"},[_vm._v(\" Все истории \")]),(_vm.stories.length)?_c('div',{staticClass:\"stories-page__category-stories\"},[_c('div',{staticClass:\"d-flex flex-wrap\"},_vm._l((_vm.stories),function(story){return _c('div',{key:story.id,staticClass:\"list-group-item stories-page__story-item\"},[_c('story-card',{attrs:{\"story\":story},on:{\"clicked\":_vm.onStoryClick}})],1)}),0)]):_vm._e()]):_c('div',{staticClass:\"stories-page__list\"},[(_vm.searchResultList.length)?_c('div',{staticClass:\"stories-page__category-stories\"},[_c('div',{staticClass:\"stories-page__category-title\"},[_vm._v(\" Результаты поиска \")]),_c('div',{staticClass:\"d-flex flex-wrap\"},_vm._l((_vm.searchResultList),function(story){return _c('div',{key:story.id,staticClass:\"list-group-item stories-page__story-item\"},[_c('story-card',{attrs:{\"story\":story},on:{\"clicked\":_vm.onStoryClick}})],1)}),0)]):_vm._e(),(_vm.nonCategoriesStories.length)?_c('div',{staticClass:\"stories-page__category-stories\"},[_c('div',{staticClass:\"stories-page__category-title\"},[_vm._v(\" Без категории \")]),_c('div',{staticClass:\"d-flex flex-wrap\"},_vm._l((_vm.nonCategoriesStories),function(story){return _c('div',{key:story.id,staticClass:\"list-group-item stories-page__story-item\"},[_c('story-card',{attrs:{\"story\":story},on:{\"clicked\":_vm.onStoryClick}})],1)}),0)]):_vm._e(),_vm._l((_vm.categoriesList),function(category,i){return (_vm.availableCategoriesIds.includes(category.id))?_c('div',{key:i,staticClass:\"stories-page__category-stories\"},[_c('div',{staticClass:\"stories-page__category-title\"},[_vm._v(\" \"+_vm._s(category.name)+\" \")]),_c('div',{staticClass:\"stories-page__category-stories-list\"},[_c('draggable',_vm._b({staticClass:\"list-group\",attrs:{\"tag\":\"ul\",\"move\":_vm.onCategoryStoryMoved},on:{\"start\":function($event){_vm.storyDragging = true},\"end\":function($event){_vm.storyDragging = false},\"change\":function($event){return _vm.onCategoryStoryOrderChange(category.id)}},model:{value:(category.stories),callback:function ($$v) {_vm.$set(category, \"stories\", $$v)},expression:\"category.stories\"}},'draggable',_vm.storyDragOptions,false),[_c('transition-group',{staticClass:\"d-flex flex-wrap\",attrs:{\"type\":\"transition\",\"name\":\"flip-list\"}},_vm._l((category.stories),function(story){return _c('li',{key:story.id,staticClass:\"list-group-item stories-page__story-item\"},[_c('story-card',{attrs:{\"story\":story},on:{\"clicked\":_vm.onStoryClick}})],1)}),0)],1)],1)]):_vm._e()})],2),(_vm.showCategoryPicker)?_c('div',{staticClass:\"category-picker\"},[_c('div',{staticClass:\"category-picker__content\"},[_c('div',{staticClass:\"category-picker__close-button\",on:{\"click\":_vm.onCategoryFilterCloseClick}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])]),_c('div',{ref:\"categoryPicker\",staticClass:\"category-picker__list\"},_vm._l((_vm.categoriesOptions),function(category,i){return _c('div',{key:i,staticClass:\"category-picker__category\"},[_c('input',{staticClass:\"category-picker__checkbox\",attrs:{\"type\":\"checkbox\",\"id\":(\"category-option-\" + i)},domProps:{\"checked\":category.checked,\"value\":category.id}}),_c('label',{staticClass:\"page__input-title\",attrs:{\"for\":(\"category-option-\" + i)}},[_vm._v(_vm._s(category.name))])])}),0),_c('ui-button',{staticClass:\"category-picker__apply-button\",on:{\"clicked\":_vm.sortCategories}},[_vm._v(\"ПРИМЕНИТЬ\")])],1)]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-popup\"},[_c('div',{staticClass:\"mb-3 modal-popup__title\"},[_vm._v(\" Выберите историю \"),_c('svg',{staticClass:\"bi bi-x-lg modal-popup__close\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"16\",\"height\":\"16\",\"fill\":\"#2D4C70\",\"viewBox\":\"0 0 16 16\"},on:{\"click\":_vm.close}},[_c('path',{attrs:{\"d\":\"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"}})])]),_c('div',{staticClass:\"form-group\"},[_c('b-form-select',{attrs:{\"options\":_vm.options,\"disabled\":_vm.selectedStoryId === -1},model:{value:(_vm.selectedStoryId),callback:function ($$v) {_vm.selectedStoryId=$$v},expression:\"selectedStoryId\"}})],1),_c('ui-button',{on:{\"clicked\":_vm.onAddClick}},[_vm._v(\"Добавить\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"modal-popup\">\r\n        <div class=\"mb-3 modal-popup__title\">\r\n            Выберите историю\r\n\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"#2D4C70\"\r\n                 class=\"bi bi-x-lg modal-popup__close\"\r\n                 viewBox=\"0 0 16 16\"\r\n                 @click=\"close\"\r\n            >\r\n                <path\r\n                    d=\"M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z\"/>\r\n            </svg>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <b-form-select v-model=\"selectedStoryId\" :options=\"options\" :disabled=\"selectedStoryId === -1\"/>\r\n        </div>\r\n        <ui-button @clicked=\"onAddClick\">Добавить</ui-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport bus from '@/plugins/bus';\r\nimport {mapMutations} from 'vuex';\r\n\r\nexport default {\r\n    props: {\r\n        categoryId: Number\r\n    },\r\n    data: () => ({\r\n        selectedStoryId: null,\r\n        options: []\r\n    }),\r\n    components: {\r\n        UiButton: () => import('../ui/UiButton')\r\n    },\r\n    computed: {\r\n        stories() {\r\n            return this.$store.state.stories.list\r\n                .filter(story => !story.categories.find(category => category.id === this.categoryId));\r\n        }\r\n    },\r\n    created() {\r\n        this.options = this.stories\r\n            .filter(story => {\r\n                if (!story.categories) {\r\n                    return true;\r\n                } else {\r\n                    return story.categories.indexOf(this.categoryId) === -1;\r\n                }\r\n            })\r\n            .map(story => {\r\n                return {\r\n                    value: story.id,\r\n                    text: story.title\r\n                };\r\n            });\r\n\r\n        if (this.options.length) {\r\n            this.selectedStoryId = this.options[0].value;\r\n        } else {\r\n            this.selectedStoryId = -1;\r\n            this.options = [{\r\n                value: -1,\r\n                text: 'Нет подходящих историй'\r\n            }];\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapMutations('firebase', ['ADD_STORY_TO_CATEGORY']),\r\n        close() {\r\n            this.$modal.hide('pick-story-modal');\r\n        },\r\n        onAddClick() {\r\n            alert('todo допилить, сейчас не сохраняет в фаербазу');\r\n            this.ADD_STORY_TO_CATEGORY({\r\n                categoryId: this.categoryId,\r\n                storyId: parseInt(this.selectedStoryId, 10)\r\n            });\r\n            bus.$emit('stories-updated');\r\n            this.close();\r\n        }\r\n    }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PickStoryModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PickStoryModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PickStoryModal.vue?vue&type=template&id=3df7d6eb&\"\nimport script from \"./PickStoryModal.vue?vue&type=script&lang=js&\"\nexport * from \"./PickStoryModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"stories-page page\" v-if=\"pageIsReady\">\r\n        <div class=\"stories-page__header\">\r\n            <div class=\"page__title mb-0\">\r\n                <nav-back/>\r\n                Истории\r\n                <span class=\"stories-page__counter\">{{ Object.keys(stories).length }}</span>\r\n            </div>\r\n            <div class=\"stories-page__right-block d-flex\">\r\n                <div class=\"stories-page__all-stories-checkbox\">\r\n                    <input type=\"checkbox\" class=\"form-control\" v-model=\"showAllStories\"/>\r\n                    <label>Показать все истории</label>\r\n                </div>\r\n                <ui-button color=\"transparent\" class=\"stories-page__filter-button d-flex\"\r\n                           @clicked=\"onCategoryFilterClick\">\r\n                    Фильтр\r\n                    <img :src=\"require('../../assets/svg/ic_filter.svg')\" width=\"22\" height=\"20\"\r\n                         class=\"stories-page__filter-icon\"/>\r\n                </ui-button>\r\n                <ui-button @clicked=\"resetSearchFields\">Поиск</ui-button>\r\n                <ui-button color=\"blue\" class=\"stories-page__add-story-button d-flex\" @clicked=\"onAddStoryClick\">\r\n                    Добавить историю\r\n                </ui-button>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"showSearchPanel\" class=\"stories-page__search-panel form-group\">\r\n            <div class=\"form-group\">\r\n                <label>ID истории</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"searchStoryId\"/>\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label>Название истории</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"searchStoryName\"/>\r\n            </div>\r\n            <ui-button @clicked=\"onSearchButtonClick\">Найти</ui-button>\r\n        </div>\r\n\r\n        <div v-if=\"showAllStories\" class=\"stories-page__list\">\r\n            <div class=\"stories-page__category-title\">\r\n                Все истории\r\n            </div>\r\n            <div v-if=\"stories.length\" class=\"stories-page__category-stories\">\r\n                <div class=\"d-flex flex-wrap\">\r\n                    <div class=\"list-group-item stories-page__story-item\" v-for=\"story in stories\"\r\n                         :key=\"story.id\">\r\n                        <story-card :story=\"story\" @clicked=\"onStoryClick\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div v-else class=\"stories-page__list\">\r\n            <div v-if=\"searchResultList.length\" class=\"stories-page__category-stories\">\r\n                <div class=\"stories-page__category-title\">\r\n                    Результаты поиска\r\n                </div>\r\n                <div class=\"d-flex flex-wrap\">\r\n                    <div class=\"list-group-item stories-page__story-item\" v-for=\"story in searchResultList\"\r\n                         :key=\"story.id\">\r\n                        <story-card :story=\"story\" @clicked=\"onStoryClick\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"nonCategoriesStories.length\" class=\"stories-page__category-stories\">\r\n                <div class=\"stories-page__category-title\">\r\n                    Без категории\r\n                </div>\r\n                <div class=\"d-flex flex-wrap\">\r\n                    <div class=\"list-group-item stories-page__story-item\" v-for=\"story in nonCategoriesStories\"\r\n                         :key=\"story.id\">\r\n                        <story-card :story=\"story\" @clicked=\"onStoryClick\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"availableCategoriesIds.includes(category.id)\" v-for=\"(category, i) of categoriesList\" :key=\"i\"\r\n                 class=\"stories-page__category-stories\">\r\n                <div class=\"stories-page__category-title\">\r\n                    {{ category.name }}\r\n                </div>\r\n                <div class=\"stories-page__category-stories-list\">\r\n                    <draggable\r\n                        class=\"list-group\"\r\n                        tag=\"ul\"\r\n                        v-model=\"category.stories\"\r\n                        v-bind=\"storyDragOptions\"\r\n                        @start=\"storyDragging = true\"\r\n                        @end=\"storyDragging = false\"\r\n                        @change=\"onCategoryStoryOrderChange(category.id)\"\r\n                        :move=\"onCategoryStoryMoved\"\r\n                    >\r\n                        <transition-group type=\"transition\" name=\"flip-list\" class=\"d-flex flex-wrap\">\r\n                            <li\r\n                                class=\"list-group-item stories-page__story-item\"\r\n                                v-for=\"story in category.stories\"\r\n                                :key=\"story.id\"\r\n                            >\r\n                                <story-card :story=\"story\" @clicked=\"onStoryClick\"/>\r\n                            </li>\r\n                        </transition-group>\r\n                    </draggable>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"category-picker\" v-if=\"showCategoryPicker\">\r\n            <div class=\"category-picker__content\">\r\n                <div class=\"category-picker__close-button\" @click=\"onCategoryFilterCloseClick\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </div>\r\n                <div class=\"category-picker__list\" ref=\"categoryPicker\">\r\n                    <div v-for=\"(category, i) in categoriesOptions\" :key=\"i\" class=\"category-picker__category\">\r\n                        <input type=\"checkbox\" :id=\"`category-option-${i}`\" :checked=\"category.checked\"\r\n                               :value=\"category.id\" class=\"category-picker__checkbox\"\r\n                        />\r\n                        <label class=\"page__input-title\" :for=\"`category-option-${i}`\">{{ category.name }}</label>\r\n                    </div>\r\n                </div>\r\n                <ui-button @clicked=\"sortCategories\" class=\"category-picker__apply-button\">ПРИМЕНИТЬ</ui-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapGetters} from 'vuex';\r\nimport draggable from \"vuedraggable\";\r\nimport {openPickStoryModal} from '@/modals/pickStoryModal';\r\nimport bus from '@/plugins/bus';\r\n\r\nexport default {\r\n    data: () => ({\r\n        pageIsReady: false,\r\n        selectedFilterOption: 0,\r\n        categoriesOptions: [],\r\n        showCategoryPicker: false,\r\n\r\n        storyDragging: false,\r\n        categoriesList: [],\r\n        categoryDragLocked: false,\r\n\r\n        showSearchPanel: false,\r\n        searchStoryId: '',\r\n        searchStoryName: '',\r\n        searchResultList: [],\r\n\r\n        showAllStories: false\r\n    }),\r\n    components: {\r\n        draggable,\r\n        UiButton: () => import('../../components/ui/UiButton'),\r\n        StoryCard: () => import('../../components/stories/StoryCard'),\r\n        NavBack: () => import('../../components/navigation/NavBack')\r\n    },\r\n    computed: {\r\n        stories() {\r\n            return this.$store.state.firebase.config.Stories.stories;\r\n        },\r\n        categories() {\r\n            return this.$store.state.firebase.config.Stories.categories;\r\n        },\r\n        storyDragOptions() {\r\n            return {\r\n                animation: 0,\r\n                group: 'description',\r\n                disabled: false,\r\n                ghostClass: 'ghost'\r\n            };\r\n        },\r\n        availableCategoriesIds() {\r\n            return this.categoriesOptions\r\n                .filter(category => category.checked)\r\n                .map(category => category.id);\r\n        },\r\n        categoriesListArray() {\r\n            const list = [];\r\n\r\n            this.availableCategoriesIds.forEach(categoryId => {\r\n                const config = this.categories.find(category => category.id === categoryId);\r\n                const stories = [];\r\n\r\n                this.stories.forEach(story => {\r\n                    if (story.categories.find(config => config.id === categoryId)) stories.push(story);\r\n                });\r\n\r\n                list.push({\r\n                    id: config.id,\r\n                    name: config.name,\r\n                    stories: stories\r\n                });\r\n            });\r\n\r\n            return list;\r\n        },\r\n        nonCategoriesStories() {\r\n            return this.stories.filter(story => !story.categories || !story.categories.length);\r\n        }\r\n    },\r\n    created() {\r\n        bus.$off('stories-updated').$on('stories-updated', this.fetchData);\r\n    },\r\n    beforeDestroy() {\r\n        bus.$off('stories-updated', this.fetchData);\r\n    },\r\n    mounted() {\r\n        this.fetchData();\r\n        this.selectedFilterOption = 0;\r\n    },\r\n    methods: {\r\n        ...mapActions('firebase', ['getConfig']),\r\n        ...mapActions('stories', ['updateCategoryOrder']),\r\n        async fetchData() {\r\n            await this.getConfig();\r\n            this.pageIsReady = true;\r\n            this.categoriesOptions = this.categories.map(category => {\r\n                return {\r\n                    id: category.id,\r\n                    name: category.name,\r\n                    checked: true\r\n                };\r\n            });\r\n\r\n            this.categoriesList = [...this.categoriesListArray];\r\n        },\r\n        onStoryClick(storyId) {\r\n            this.$router.push(`/story/${storyId}`);\r\n        },\r\n        onAddStoryClick() {\r\n            this.$router.push('/story');\r\n        },\r\n        onCategoryFilterClick() {\r\n            this.showCategoryPicker = true;\r\n        },\r\n        onCategoryFilterCloseClick() {\r\n            this.showCategoryPicker = false;\r\n        },\r\n        sortCategories() {\r\n            if (!this.$refs.categoryPicker) {\r\n                return;\r\n            }\r\n\r\n            const checkboxes = this.$refs.categoryPicker.querySelectorAll('.category-picker__checkbox');\r\n\r\n            checkboxes.forEach(checkbox => {\r\n                const categoryId = parseInt(checkbox.value, 10);\r\n                const category = this.categoriesOptions.find(option => option.id === categoryId);\r\n                category.checked = checkbox.checked;\r\n            });\r\n\r\n            this.onCategoryFilterCloseClick();\r\n        },\r\n        async onCategoryStoryOrderChange(categoryId) {\r\n            const config = this.categoriesList.find(category => category.id === categoryId);\r\n\r\n            if (config) {\r\n                this.categoryDragLocked = true;\r\n\r\n                await this.updateCategoryOrder({\r\n                    categoryId,\r\n                    stories: config.stories.map(story => story.id)\r\n                });\r\n\r\n                this.categoryDragLocked = false;\r\n\r\n                bus.$emit('show-notification-message', 'Сортировка историй обновлена');\r\n            }\r\n        },\r\n        onCategoryStoryMoved() {\r\n            return !this.categoryDragLocked;\r\n        },\r\n        resetSearchFields() {\r\n            this.showSearchPanel = !this.showSearchPanel;\r\n            this.searchStoryId = this.searchStoryName = '';\r\n            this.searchResultList = [];\r\n        },\r\n        onSearchButtonClick() {\r\n            if (this.searchStoryId.length) {\r\n                const story = this.stories.find(story => story.id === parseInt(this.searchStoryId));\r\n                if (story) this.searchResultList.push(story);\r\n            } else if (this.searchStoryName.length) {\r\n                const stories = this.stories.filter(\r\n                    story => story.title.toLowerCase().includes(this.searchStoryName.toLowerCase())\r\n                );\r\n                if (stories.length) this.searchResultList = stories;\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../../assets/scss/variables\";\r\n\r\n.stories-page {\r\n    margin-top: 0;\r\n\r\n    &__header {\r\n        height: 80px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n    }\r\n\r\n    &__add-story-button {\r\n        width: 222px;\r\n        text-transform: uppercase;\r\n    }\r\n\r\n    &__counter {\r\n        margin: 18px 0 0 15px;\r\n        font-size: 16px;\r\n    }\r\n\r\n    &__folder-icon {\r\n        width: 24px;\r\n        height: 24px;\r\n        background: url(../../assets/svg/ic_folder.svg) 0 0 no-repeat;\r\n        margin: 0 4px 0 -4px;\r\n    }\r\n\r\n    &__right-block {\r\n        height: 100%;\r\n        align-items: center;\r\n        border-bottom: 1px solid #9AAABC;\r\n\r\n        div {\r\n            margin: 0 12px;\r\n        }\r\n    }\r\n\r\n    &__filter-dropdown {\r\n        width: 177px;\r\n\r\n        .btn {\r\n            background: transparent !important;\r\n            color: #2D4C70 !important;\r\n            box-shadow: none !important;\r\n            font-weight: 700;\r\n\r\n            &:after {\r\n                background: url(../../assets/svg/ic_down.svg) 0 0 no-repeat;\r\n                width: 14px;\r\n                height: 8px;\r\n                border: 0;\r\n                position: relative;\r\n                left: 10px;\r\n                top: 1px;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    &__filter-button {\r\n        width: 145px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        height: 40px;\r\n    }\r\n\r\n    &__category-button {\r\n        width: auto;\r\n        align-items: center;\r\n        justify-content: center;\r\n        height: 40px;\r\n    }\r\n\r\n    .dropdown-toggle {\r\n        padding-right: 24px;\r\n    }\r\n\r\n    &__filter-icon {\r\n        margin-left: 10px;\r\n    }\r\n\r\n    &__list {\r\n        max-width: 1136px;\r\n        display: inline-block;\r\n        text-align: left;\r\n    }\r\n\r\n    &__category-title {\r\n        display: flex;\r\n        align-items: center;\r\n        font-size: 24px;\r\n        font-weight: 700;\r\n        line-height: 33px;\r\n        text-align: left;\r\n        height: 80px;\r\n        border-bottom: 1px solid #9AAABC;\r\n        margin-bottom: 32px;\r\n    }\r\n\r\n    &__category-stories-list {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    &__story-item {\r\n        border: 0;\r\n        width: 176px;\r\n        height: 287px;\r\n        padding: 0;\r\n    }\r\n\r\n    .list-group-item {\r\n        margin: 0 13px 24px 0 !important;\r\n    }\r\n\r\n    &__add-story-card {\r\n        width: 176px;\r\n        height: 220px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border: 2px solid #C3DFFF;\r\n        border-radius: 8px;\r\n        color: #C3DFFF;\r\n        font-weight: 700;\r\n        font-size: 80px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    &__search-panel {\r\n        padding: 16px 0 0;\r\n        margin-bottom: -12px;\r\n\r\n        .form-group {\r\n            display: flex;\r\n\r\n            * {\r\n                display: flex;\r\n                min-width: 20%;\r\n            }\r\n        }\r\n    }\r\n\r\n    &__all-stories-checkbox {\r\n        display: flex;\r\n        align-items: flex-end;\r\n        justify-content: flex-start;\r\n\r\n        * {\r\n            display: flex;\r\n        }\r\n\r\n        input.form-control {\r\n            width: 20px;\r\n            margin-right: 8px;\r\n\r\n            &:focus {\r\n                outline: 0;\r\n                box-shadow: none;\r\n            }\r\n        }\r\n\r\n        label {\r\n            width: 190px;\r\n        }\r\n    }\r\n}\r\n\r\n.category-picker {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 90vh;\r\n    width: 100%;\r\n    position: fixed;\r\n    left: 0;\r\n    z-index: 1;\r\n\r\n    &__content {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        max-width: 50vw;\r\n        background: #FFF;\r\n        box-shadow: 0 4px 16px rgba(45, 76, 112, .24);\r\n        border-radius: 24px;\r\n        padding: 24px 12px;\r\n        position: relative;\r\n    }\r\n\r\n    &__close-button {\r\n        position: absolute;\r\n        top: 12px;\r\n        right: 24px;\r\n        font-weight: 700;\r\n        font-size: 32px;\r\n        color: $primaryColor;\r\n        cursor: pointer;\r\n    }\r\n\r\n    &__list {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        flex-wrap: wrap;\r\n        margin-top: 32px;\r\n    }\r\n\r\n    &__category {\r\n        margin: 12px;\r\n\r\n        input {\r\n            position: relative;\r\n            top: 1px;\r\n        }\r\n\r\n        label {\r\n            margin-left: 4px;\r\n        }\r\n    }\r\n\r\n    &__apply-button {\r\n        align-self: center;\r\n        margin-top: 24px;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stories.vue?vue&type=template&id=81e61eee&\"\nimport script from \"./Stories.vue?vue&type=script&lang=js&\"\nexport * from \"./Stories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Stories.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stories.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}